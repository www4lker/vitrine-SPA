<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analisador de Livros Densos ‚Äî NotebookLM RAG-Aware</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Google Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
            color: #202124;
            padding: 2rem 1rem;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 16px;
            color: white;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .header h1 {
            font-size: 2.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            letter-spacing: -0.5px;
        }
        
        .header p {
            font-size: 1rem;
            opacity: 0.95;
            font-weight: 400;
            line-height: 1.5;
        }
        
        .header .subtitle {
            font-size: 0.85rem;
            opacity: 0.8;
            margin-top: 0.5rem;
            font-style: italic;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
            margin-bottom: 1.5rem;
            transition: box-shadow 0.2s ease;
        }
        
        .card:hover {
            box-shadow: 0 1px 3px 0 rgba(60,64,67,0.3), 0 4px 8px 3px rgba(60,64,67,0.15);
        }
        
        .card h2 {
            font-size: 1.3rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            color: #202124;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .card h2 .emoji {
            font-size: 1.5rem;
        }
        
        .input-section {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #202124;
            font-size: 0.9rem;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #dadce0;
            border-radius: 8px;
            font-size: 0.95rem;
            font-family: inherit;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            background: #fff;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .templates-label {
            display: block;
            margin-bottom: 1rem;
            font-weight: 500;
            color: #202124;
            font-size: 0.9rem;
        }
        
        .templates {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 0.75rem;
            margin-bottom: 1rem;
        }
        
        .template-btn {
            background: #f8f9fa;
            border: 2px solid #dadce0;
            padding: 1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            font-size: 0.85rem;
            color: #202124;
            font-weight: 500;
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }
        
        .template-btn:hover {
            background: #f1f3f4;
            border-color: #667eea;
            transform: translateY(-2px);
        }
        
        .template-btn.active {
            background: linear-gradient(135deg, #e8eeff 0%, #dce4ff 100%);
            border-color: #667eea;
            color: #4c5fd5;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
        }
        
        .template-btn .emoji {
            font-size: 1.5rem;
        }
        
        .template-btn .title {
            font-weight: 600;
            font-size: 0.95rem;
        }
        
        .template-btn .desc {
            font-size: 0.75rem;
            opacity: 0.7;
            line-height: 1.3;
        }
        
        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ff9800;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        
        .warning-box strong {
            color: #f57c00;
            display: block;
            margin-bottom: 0.5rem;
        }
        
        .checklist {
            background: #f1f8ff;
            border-left: 4px solid #1a73e8;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
        }
        
        .checklist h4 {
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
            color: #1557b0;
        }
        
        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
            line-height: 1.5;
        }
        
        .checklist-item input[type="checkbox"] {
            width: auto;
            margin-top: 0.2rem;
            cursor: pointer;
        }
        
        .generate-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        .generate-btn:active {
            transform: translateY(0);
        }
        
        .output-section {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .output-header h3 {
            font-size: 1.1rem;
            font-weight: 500;
            color: #202124;
        }
        
        .copy-btn {
            background: #1a73e8;
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .copy-btn:hover {
            background: #1765cc;
        }
        
        .copy-btn.copied {
            background: #34a853;
        }
        
        .output-box {
            background: #f8f9fa;
            border: 1px solid #dadce0;
            border-radius: 8px;
            padding: 1.5rem;
            font-family: 'Roboto Mono', 'Consolas', 'Monaco', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            white-space: pre-wrap;
            max-height: 600px;
            overflow-y: auto;
            color: #202124;
        }
        
        .char-count {
            text-align: right;
            font-size: 0.8rem;
            color: #5f6368;
            margin-top: 0.5rem;
        }
        
        .char-count .warning {
            color: #d93025;
            font-weight: 500;
        }
        
        .audit-section {
            background: #fef7e0;
            border-left: 4px solid #f9ab00;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
        }
        
        .audit-section h4 {
            color: #ea8600;
            margin-bottom: 1rem;
            font-size: 1rem;
        }
        
        .audit-item {
            background: white;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 0.75rem;
            font-size: 0.85rem;
            line-height: 1.6;
        }
        
        .audit-item strong {
            color: #ea8600;
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
            
            .templates {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö Analisador de Livros Densos</h1>
            <p>Sistema de Prompts Estratificados para NotebookLM ‚Äî RAG-Aware</p>
            <div class="subtitle">Baseado na estrutura cl√°ssica de produ√ß√£o livreira + Protocolos de verifica√ß√£o para limita√ß√µes RAG</div>
        </div>
        
        <!-- CONFIGURA√á√ÉO B√ÅSICA -->
        <div class="card">
            <h2><span class="emoji">‚öôÔ∏è</span> Configura√ß√£o B√°sica</h2>
            
            <div class="input-section">
                <label>T√≠tulo da Obra/Corpus</label>
                <input type="text" id="bookTitle" placeholder="Ex: Vigiar e Punir (Foucault, 1975)">
            </div>
            
            <div class="input-section">
                <label>Tipo de An√°lise</label>
                <select id="analysisType">
                    <option value="individual">Livro Individual (an√°lise hol√≠stica)</option>
                    <option value="comparative">Corpus Tem√°tico (2-5 obras)</option>
                    <option value="extensive">Corpus Extenso (6-30 obras)</option>
                </select>
            </div>
            
            <div class="input-section">
                <label>Contexto de Pesquisa (opcional)</label>
                <textarea id="researchContext" placeholder="Ex: Analisando concep√ß√£o de poder disciplinar para tese sobre dispositivos de vigil√¢ncia algor√≠tmica"></textarea>
            </div>
        </div>
        
        <!-- MODO DE AN√ÅLISE ESTRUTURAL -->
        <div class="card">
            <h2><span class="emoji">üèóÔ∏è</span> Modo de An√°lise Estrutural</h2>
            <p style="margin-bottom: 1.5rem; color: #5f6368; font-size: 0.9rem;">Baseado na arquitetura cl√°ssica de produ√ß√£o de livros acad√™micos</p>
            
            <div class="templates-label">Selecione o componente estrutural para an√°lise:</div>
            <div class="templates" id="structuralModes"></div>
            
            <div class="warning-box">
                <strong>‚ö†Ô∏è Limita√ß√£o RAG Cr√≠tica: Fragmenta√ß√£o de Leitura</strong>
                NotebookLM n√£o l√™ o livro integralmente ‚Äî processa via chunks sem√¢nticos. An√°lises de "arco argumentativo completo" s√£o tecnicamente imposs√≠veis sem m√∫ltiplas queries. Use estrat√©gia multi-prompt para reconstruir estrutura.
            </div>
        </div>
        
        <!-- PROMPTS COMPENSAT√ìRIOS PARA VI√âS RAG -->
        <div class="card">
            <h2><span class="emoji">üîç</span> Prompts Compensat√≥rios (Anti-Vi√©s RAG)</h2>
            <p style="margin-bottom: 1.5rem; color: #5f6368; font-size: 0.9rem;">Estrat√©gias para combater travamento sem√¢ntico e path dependency</p>
            
            <div class="templates-label">Selecione estrat√©gia de verifica√ß√£o:</div>
            <div class="templates" id="compensatoryModes"></div>
            
            <div class="checklist">
                <h4>‚úì Checklist de Verifica√ß√£o Manual (Researcher-in-the-Loop)</h4>
                <div class="checklist-item">
                    <input type="checkbox" id="check1">
                    <label for="check1">Realizei refresh do navegador antes desta sess√£o cr√≠tica?</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check2">
                    <label for="check2">Confirmei que n√£o h√° "ghost summaries" de fontes deletadas?</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check3">
                    <label for="check3">Identifiquei quais passagens s√£o citadas vs. quais foram omitidas?</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check4">
                    <label for="check4">Verifiquei se respostas n√£o est√£o repetindo chunks da query anterior?</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="check5">
                    <label for="check5">Auditei se os "20% Pareto" s√£o os mais IMPORTANTES (n√£o apenas os mais SIMILARES)?</label>
                </div>
            </div>
        </div>
        
        <!-- FOCO CUSTOMIZADO -->
        <div class="card">
            <h2><span class="emoji">üéØ</span> Foco Customizado</h2>
            <div class="input-section">
                <label>Direcionamento Espec√≠fico (opcional)</label>
                <textarea id="customFocus" placeholder="Ex: Enfatize conceito de 'panoptismo' e suas rela√ß√µes com tecnologias contempor√¢neas de vigil√¢ncia"></textarea>
            </div>
        </div>
        
        <!-- BOT√ÉO GERAR -->
        <div class="card">
            <button class="generate-btn" onclick="generatePrompt()">
                üöÄ Gerar Prompt Estratificado
            </button>
        </div>
        
        <!-- OUTPUT -->
        <div class="card output-section" id="outputSection">
            <div class="output-header">
                <h3>üìã Prompt Gerado</h3>
                <button class="copy-btn" onclick="copyToClipboard()">
                    <span id="copyIcon">üìã</span>
                    <span id="copyText">Copiar</span>
                </button>
            </div>
            <div class="output-box" id="promptOutput"></div>
            <div class="char-count" id="charCount"></div>
            
            <div class="audit-section">
                <h4>üî¨ Protocolo de Auditoria P√≥s-Resposta</h4>
                <div class="audit-item">
                    <strong>1. Verifica√ß√£o de Chunks:</strong> Compare cita√ß√µes inline com passagens originais. O modelo usou os segmentos mais representativos ou houve "semantic locking" em trechos perif√©ricos?
                </div>
                <div class="audit-item">
                    <strong>2. Teste de Contradi√ß√£o:</strong> Reformule a query de forma semanticamente distante (ex: se perguntou sobre "poder", pergunte sobre "resist√™ncia"). Respostas id√™nticas indicam travamento sem√¢ntico.
                </div>
                <div class="audit-item">
                    <strong>3. Auditoria de Omiss√µes:</strong> Liste 3 conceitos-chave que voc√™ SABE estarem no livro. NotebookLM os mencionou? Se n√£o, eles podem estar em chunks n√£o-recuperados.
                </div>
                <div class="audit-item">
                    <strong>4. Valida√ß√£o Cross-Corpus:</strong> Se an√°lise multi-livro, verifique se todos os livros foram genuinamente considerados ou se apenas os primeiros carregados dominaram a resposta (bug Centrestage).
                </div>
            </div>
        </div>
    </div>

    <script>
        // Templates de Modos Estruturais
        const structuralModes = [
            {
                id: 'introducao',
                emoji: 'üéØ',
                title: 'Introdu√ß√£o',
                desc: 'Problema, objetivos, tese central',
                prompt: `**AN√ÅLISE DE INTRODU√á√ÉO**

Extraia e analise elementos introdut√≥rios da obra:

**1. PROBLEMA DE PESQUISA**
- Qual quest√£o central/puzzle intelectual o autor busca resolver?
- Que lacuna na literatura/pr√°tica a obra pretende preencher?
- Contexto hist√≥rico/te√≥rico que motiva a investiga√ß√£o

**2. OBJETIVOS E ESCOPO**
- Objetivos declarados (expl√≠citos) vs. objetivos impl√≠citos
- Delimita√ß√µes: o que a obra SE PROP√ïE a fazer vs. o que N√ÉO faz
- Popula√ß√£o/fen√¥meno estudado, per√≠odo temporal, recorte geogr√°fico

**3. TESE/ARGUMENTO CENTRAL**
- Enuncia√ß√£o precisa da tese principal (1-2 frases)
- Claims centrais que sustentam a tese
- Originalidade/contribui√ß√£o declarada pelo autor

**4. ESTRUTURA ANUNCIADA**
- Organiza√ß√£o dos cap√≠tulos/se√ß√µes
- L√≥gica de progress√£o argumentativa
- Justificativa para sequ√™ncia escolhida

**COMPENSA√á√ÉO PARA CHUNKING**: Como introdu√ß√µes s√£o relativamente curtas, NotebookLM tende a recuper√°-las bem. MAS: se autor distribui objetivos ao longo do texto, solicite explicitamente: "Identifique objetivos TANTO na introdu√ß√£o formal QUANTO em pref√°cios, notas iniciais e primeiro cap√≠tulo."`
            },
            {
                id: 'desenvolvimento',
                emoji: 'üî¨',
                title: 'Desenvolvimento',
                desc: 'Argumenta√ß√£o principal, evid√™ncias',
                prompt: `**AN√ÅLISE DE DESENVOLVIMENTO ARGUMENTATIVO**

Mapeie a constru√ß√£o do argumento ao longo da obra:

**1. ARQUITETURA ARGUMENTATIVA**
- Identifique sub-argumentos principais (3-7 tipicamente)
- Para cada sub-argumento: tese, evid√™ncias mobilizadas, conclus√£o parcial
- Como sub-argumentos se conectam (sequencial, cumulativo, dial√©tico)

**2. TIPOS DE EVID√äNCIA**
- Emp√≠rica: dados quantitativos, estudos de caso, observa√ß√µes etnogr√°ficas
- Te√≥rica: frameworks aplicados, conceitos operacionalizados
- Textual: an√°lise de fontes prim√°rias, close reading
- Hist√≥rica: arquivos, documentos de √©poca
- Classifique por cap√≠tulo/se√ß√£o

**3. MOMENTOS DE VIRADA**
- Identifique 2-3 "pontos de inflex√£o" onde argumento muda de dire√ß√£o
- O que desencadeia a virada (nova evid√™ncia, cr√≠tica antecipada, contradi√ß√£o resolvida)
- Como viradas afetam tese central

**4. ESTRAT√âGIA RET√ìRICA**
- Ordem de apresenta√ß√£o (dedutiva/indutiva, cronol√≥gica/tem√°tica)
- Uso de exemplos paradigm√°ticos
- Antecipa√ß√£o de obje√ß√µes

**‚ö†Ô∏è LIMITA√á√ÉO RAG CR√çTICA**: Esta √© a an√°lise MAIS AFETADA por chunking. NotebookLM ver√° "momentos" argumentativos, n√£o progress√µes. 

**ESTRAT√âGIA COMPENSAT√ìRIA OBRIGAT√ìRIA**:
1. Solicite an√°lise POR CAP√çTULO (queries separadas)
2. Depois, solicite: "Como argumentos dos Cap√≠tulos X, Y, Z se conectam?"
3. Finalmente: "Liste transi√ß√µes argumentativas QUE N√ÉO FORAM MENCIONADAS mas que conectam se√ß√µes"

Isto for√ßa o sistema a explorar m√∫ltiplos clusters sem√¢nticos.`
            },
            {
                id: 'metodologia',
                emoji: '‚öóÔ∏è',
                title: 'Metodologia',
                desc: 'M√©todos, corpus, procedimentos',
                prompt: `**AN√ÅLISE METODOL√ìGICA**

Extraia e avalie procedimentos metodol√≥gicos:

**1. DESENHO DE PESQUISA**
- Abordagem: qualitativa, quantitativa, mista, te√≥rico-especulativa
- Justificativa: por que essa abordagem para essa pergunta?
- Limita√ß√µes reconhecidas pelo autor

**2. CORPUS/DADOS**
- Descri√ß√£o precisa: que textos/dados/fen√¥menos foram analisados
- Crit√©rios de sele√ß√£o/inclus√£o
- Tamanho e representatividade
- Per√≠odo de coleta (se aplic√°vel)

**3. PROCEDIMENTOS ANAL√çTICOS**
- T√©cnicas espec√≠ficas: an√°lise de discurso, regress√£o estat√≠stica, genealogia, etc.
- Operacionaliza√ß√£o de conceitos-chave
- Software/ferramentas utilizadas
- Processo de codifica√ß√£o/categoriza√ß√£o (se qualitativo)

**4. VALIDA√á√ÉO E RIGOR**
- Estrat√©gias de triangula√ß√£o
- Tratamento de casos desviantes
- Reflexividade metodol√≥gica
- Limita√ß√µes e vieses reconhecidos

**PROMPT ANTI-VI√âS**: "Identifique passagens metodol√≥gicas MESMO SE n√£o rotuladas explicitamente como 'metodologia'. Busque em: pref√°cios, notas de rodap√©, ap√™ndices, e discuss√µes sobre 'como este livro foi feito'."`
            },
            {
                id: 'conclusao',
                emoji: 'üéì',
                title: 'Conclus√£o',
                desc: 'S√≠ntese, implica√ß√µes, limita√ß√µes',
                prompt: `**AN√ÅLISE DE CONCLUS√ÉO**

Extraia fechamento argumentativo e proje√ß√µes:

**1. S√çNTESE DO ARGUMENTO**
- Recapitula√ß√£o da tese central
- Principais achados/contribui√ß√µes (listados)
- Como evid√™ncia sustentou claims iniciais

**2. IMPLICA√á√ïES**
- Te√≥ricas: que frameworks foram validados/desafiados/refinados
- Pr√°ticas: aplica√ß√µes, pol√≠ticas p√∫blicas, interven√ß√µes
- Metodol√≥gicas: que abordagens se mostraram frut√≠feras
- Epistemol√≥gicas: o que isso revela sobre natureza do conhecimento neste campo

**3. LIMITA√á√ïES E AUTOCR√çTICA**
- Limita√ß√µes reconhecidas pelo autor
- O que a pesquisa N√ÉO p√¥de responder
- Casos que desafiam a tese
- Generalizabilidade vs. particularidade

**4. AGENDAS FUTURAS**
- Quest√µes n√£o-resolvidas
- Extens√µes poss√≠veis da pesquisa
- Novos puzzles que emergiram

**COMPENSA√á√ÉO PARA PATH DEPENDENCY**: Conclus√µes frequentemente referenciam conceitos da introdu√ß√£o. NotebookLM pode "travar" nessas cita√ß√µes. FORCE novo frame: "Identifique implica√ß√µes INESPERADAS ‚Äî aquelas que n√£o decorrem diretamente da tese inicial mas emergiram durante a pesquisa."`
            },
            {
                id: 'estrutura-retorica',
                emoji: 'üé≠',
                title: 'Estrutura Ret√≥rica',
                desc: 'Estrat√©gias persuasivas, estilo',
                prompt: `**AN√ÅLISE DA ESTRUTURA RET√ìRICA**

Examine estrat√©gias persuasivas e arquitetura discursiva:

**1. MOVIMENTOS RET√ìRICOS**
- Abertura: como autor estabelece credibilidade/autoridade
- Desenvolvimento: estrat√©gias de persuas√£o (logos, ethos, pathos)
- Fechamento: t√©cnicas de consolida√ß√£o da tese

**2. ARQUITETURA DISCURSIVA**
- Estrutura de superf√≠cie vs. estrutura profunda
- Repeti√ß√µes estrat√©gicas (conceitos/imagens que reaparecem)
- Progress√£o: linear, c√≠clica, espiralada, rizom√°tica

**3. ESTRAT√âGIAS DE EXEMPLIFICA√á√ÉO**
- Tipos de exemplos: paradigm√°ticos, ilustrativos, contra-exemplos
- Fun√ß√£o: demonstra√ß√£o, clarifica√ß√£o, provoca√ß√£o
- Recorr√™ncia: h√° um "caso central" que ancora a an√°lise?

**4. REGISTRO E TOM**
- N√≠vel de formalidade
- Posicionamento autoral: neutro, engajado, pol√™mico
- Uso de met√°foras/analogias estruturantes
- Pressupostos sobre o leitor (expertise assumida)

**5. INTERTEXTUALIDADE**
- Com quem o autor dialoga explicitamente
- Refer√™ncias impl√≠citas (alus√µes, par√≥dias, invers√µes)
- Tradi√ß√£o intelectual na qual se insere

**‚ö†Ô∏è ESTE MODO √â ALTAMENTE VULNER√ÅVEL A CHUNKING**: Estruturas ret√≥ricas s√£o globais, n√£o locais.

**ESTRAT√âGIA**: Ap√≥s resposta, solicite: "Que padr√µes ret√≥ricos podem ter sido PERDIDOS porque n√£o aparecem em segmentos individuais mas apenas na obra completa?" Isto for√ßa meta-an√°lise.`
            },
            {
                id: 'conceitos-chave',
                emoji: 'üí°',
                title: 'Conceitos-Chave',
                desc: 'Termos t√©cnicos, defini√ß√µes',
                prompt: `**GLOSS√ÅRIO DE CONCEITOS-CHAVE**

Extraia 10-20 conceitos centrais com defini√ß√µes contextuais:

**ESTRUTURA POR CONCEITO**:

**[TERMO]**

*Defini√ß√£o Contextual* (2-4 frases):
- Como o autor define/usa este termo especificamente
- Nuances que o distinguem de usos cotidianos ou de outros autores

*Operacionaliza√ß√£o* (1-2 par√°grafos):
- Como o conceito funciona na argumenta√ß√£o
- Exemplos paradigm√°ticos de aplica√ß√£o
- Rela√ß√µes com outros conceitos-chave
- Cr√≠ticas ou tens√µes internas ao conceito

*Genealogia* (se relevante):
- Origem do termo (autor cunhou? adaptou de quem?)
- Evolu√ß√£o ao longo da obra (se conceito √© redefinido)

**CRIT√âRIOS DE SELE√á√ÉO**:
- Conceitos que aparecem em m√∫ltiplos cap√≠tulos
- Termos t√©cnicos/neologismos
- Conceitos que estruturam o argumento
- Termos que o autor define explicitamente

**ANTI-VI√âS RAG**: "Para cada conceito, identifique passagens em que ele √© DEFINIDO vs. passagens em que √© APLICADO. Se NotebookLM privilegiou aplica√ß√µes, solicite explicitamente: 'Onde autor DEFINE [conceito] pela primeira vez?'"`
            },
            {
                id: 'debates',
                emoji: '‚öîÔ∏è',
                title: 'Debates e Cr√≠ticas',
                desc: 'Posicionamentos, controv√©rsias',
                prompt: `**MAPEAMENTO DE DEBATES E POSICIONAMENTO**

Identifique interlocu√ß√µes cr√≠ticas e posicionamento no campo:

**1. ADVERS√ÅRIOS INTELECTUAIS**
- Liste autores/teorias criticados explicitamente
- Natureza da cr√≠tica: emp√≠rica, te√≥rica, metodol√≥gica, pol√≠tica
- Generosidade vs. hostilidade da cr√≠tica
- For√ßa dos argumentos contra advers√°rios

**2. ALIADOS E PRECURSORES**
- Quem o autor cita favoravelmente
- Que frameworks s√£o adotados/adaptados
- Como autor se posiciona em rela√ß√£o a tradi√ß√µes (continuidade/ruptura)

**3. CONTROV√âRSIAS DO CAMPO**
- Identifique 2-4 debates centrais na literatura que a obra engaja
- Posicionamento do autor em cada debate
- Evid√™ncia mobilizada para sustentar posi√ß√£o
- Sil√™ncios: debates relevantes que a obra N√ÉO engaja

**4. RECEP√á√ÉO CR√çTICA (se obra √© cl√°ssica)**
- Principais linhas de cr√≠tica recebidas
- Apropria√ß√µes/distor√ß√µes comuns
- Legado e influ√™ncia

**COMPENSA√á√ÉO PARA DISTRACTING EFFECT**: Debates tendem a gerar alta densidade sem√¢ntica (muitas men√ß√µes a nomes/conceitos). RAG pode "travar" em passagens pol√™micas.

**VERIFICA√á√ÉO**: Ap√≥s resposta, pergunte: "Liste autores mencionados na obra que N√ÉO foram discutidos na resposta anterior." Isto revela vi√©s de recupera√ß√£o.`
            },
            {
                id: 'lacunas',
                emoji: 'üï≥Ô∏è',
                title: 'Lacunas e Sil√™ncios',
                desc: 'O que n√£o foi abordado',
                prompt: `**IDENTIFICA√á√ÉO DE LACUNAS E SIL√äNCIOS**

Mapeie aus√™ncias significativas:

**1. LACUNAS TEM√ÅTICAS**
- T√≥picos relacionados que n√£o foram abordados
- Casos/fen√¥menos que deveriam ter sido considerados mas n√£o foram
- Contextos (geogr√°ficos, temporais, demogr√°ficos) ausentes

**2. LACUNAS METODOL√ìGICAS**
- Abordagens n√£o utilizadas mas aplic√°veis
- Tipos de evid√™ncia n√£o mobilizados
- Perspectivas disciplinares ausentes (se pesquisa interdisciplinar)

**3. LACUNAS TE√ìRICAS**
- Frameworks relevantes n√£o aplicados
- Conceitos que poderiam ter enriquecido an√°lise
- Debates importantes n√£o engajados

**4. SIL√äNCIOS ESTRUTURAIS**
- Que pressupostos n√£o foram questionados
- Que quest√µes foram naturalizadas
- Vieses potenciais n√£o reconhecidos
- Vozes/perspectivas ausentes

**5. AUTOCR√çTICA DO AUTOR**
- O autor reconhece lacunas? Quais?
- Justificativas para delimita√ß√µes
- Promessas de trabalhos futuros

**‚ö†Ô∏è ESTA √â A AN√ÅLISE MAIS DIF√çCIL PARA RAG**: Por defini√ß√£o, busca o que N√ÉO est√° no texto.

**ESTRAT√âGIA OBRIGAT√ìRIA**: Use prompt "negativo": "Baseado no que a obra TRATA, liste 5-10 temas/m√©todos/conceitos que seriam L√ìGICOS de aparecer mas est√£o AUSENTES." Isto for√ßa infer√™ncia por contraste.`
            }
        ];

        // Templates de Prompts Compensat√≥rios
        const compensatoryModes = [
            {
                id: 'reset-cognitivo',
                emoji: 'üîÑ',
                title: 'Reset Cognitivo',
                desc: 'For√ßar nova recupera√ß√£o sem√¢ntica',
                prompt: `**PROMPT DE RESET COGNITIVO**

[IMPORTANTE: Use este prompt DEPOIS de ter obtido resposta inicial que voc√™ suspeita estar "travada" em chunks espec√≠ficos]

**INSTRU√á√ïES PARA NOTEBOOKLM**:

Ignore completamente a an√°lise anterior. Realize NOVA busca sem√¢ntica como se fosse a primeira vez que voc√™ v√™ este documento.

**TAREFA**: Re-analise [T√ìPICO] focando EXCLUSIVAMENTE em passagens que:
1. Usam terminologia DIFERENTE daquela na resposta anterior
2. Aparecem em se√ß√µes do documento N√ÉO citadas anteriormente
3. Apresentam perspectivas que CONTRADIGAM ou NUANCEM resposta anterior

**VERIFICA√á√ÉO**: Antes de responder, liste:
- Quais chunks voc√™ recuperou DESTA VEZ
- Como eles diferem dos chunks recuperados anteriormente
- Se h√° sobreposi√ß√£o, JUSTIFIQUE por que essas passagens s√£o genuinamente as mais relevantes

**FUNDAMENTO**: Este prompt combate "semantic locking" ao for√ßar sistema a explorar espa√ßo sem√¢ntico alternativo via restri√ß√µes expl√≠citas.`
            },
            {
                id: 'auditoria-omissao',
                emoji: 'üîç',
                title: 'Auditoria de Omiss√µes',
                desc: 'Identificar chunks n√£o-recuperados',
                prompt: `**PROMPT DE AUDITORIA DE OMISS√ïES**

**PARTE 1: MAPEAMENTO DE COBERTURA**

Liste TODAS as se√ß√µes/cap√≠tulos do documento que foram mencionadas nas suas respostas anteriores sobre [T√ìPICO].

Para cada se√ß√£o N√ÉO mencionada, indique:
- T√≠tulo/identificador da se√ß√£o
- Por que pode ter sido omitida (conte√∫do irrelevante? fora do escopo sem√¢ntico da query?)
- Se cont√©m informa√ß√£o potencialmente relevante para [T√ìPICO]

**PARTE 2: EXPLORA√á√ÉO DE ZONAS N√ÉO-RECUPERADAS**

Agora, FOR√áA-TE a analisar especificamente as se√ß√µes omitidas identificadas acima. Para cada uma:
- H√° informa√ß√£o relevante que deveria ter sido inclu√≠da?
- Que nuances/contradi√ß√µes essas se√ß√µes trazem?
- Como mudam/complementam resposta anterior?

**FUNDAMENTO**: Este prompt compensa FP2 (Missed Top Ranked) ao for√ßar an√°lise de material que n√£o alcan√ßou ranking alto mas pode ser substantivamente relevante.`
            },
            {
                id: 'diversidade-semantica',
                emoji: 'üåà',
                title: 'Diversidade Sem√¢ntica',
                desc: 'Explorar m√∫ltiplos clusters',
                prompt: `**PROMPT DE DIVERSIDADE SEM√ÇNTICA**

Para analisar [T√ìPICO] sob m√∫ltiplas perspectivas:

**TAREFA MULTI-FRAME**:
Analise o t√≥pico atrav√©s de 4 "lentes" sem√¢nticas distintas. Para cada lente, recupere chunks DIFERENTES:

**Lente 1 ‚Äî Definicional**: Passagens que DEFINEM conceitos-chave
**Lente 2 ‚Äî Aplicativa**: Passagens que APLICAM conceitos a casos
**Lente 3 ‚Äî Cr√≠tica**: Passagens que QUESTIONAM ou PROBLEMATIZAM conceitos
**Lente 4 ‚Äî Metodol√≥gica**: Passagens que explicam COMO autor chegou a conclus√µes

Para cada lente:
- Cite 2-3 passagens espec√≠ficas recuperadas
- Explicite COMO essa lente muda o enquadramento do t√≥pico
- Identifique tens√µes/contradi√ß√µes entre lentes

**VERIFICA√á√ÉO**: Se m√∫ltiplas lentes citaram as MESMAS passagens, isto indica travamento sem√¢ntico. Neste caso, reformule lentes para for√ßar maior diverg√™ncia.

**FUNDAMENTO**: Combate path dependency ao exigir explora√ß√£o de m√∫ltiplos clusters sem√¢nticos.`
            },
            {
                id: 'validacao-pareto',
                emoji: 'üìä',
                title: 'Valida√ß√£o Pareto',
                desc: 'Auditoria dos 20% essenciais',
                prompt: `**PROMPT DE VALIDA√á√ÉO PARETO (20% ESSENCIAL)**

**OBJETIVO**: Verificar se chunks recuperados capturam verdadeiramente os 20% mais IMPORTANTES (n√£o apenas mais SIMILARES).

**PARTE 1: RANKING DE IMPORT√ÇNCIA**

Liste os 10 conceitos/argumentos/evid√™ncias que voc√™ considerou MAIS IMPORTANTES para [T√ìPICO], classificados por:
- Centralidade para tese principal
- Frequ√™ncia de men√ß√£o ao longo do texto
- Novidade/originalidade da contribui√ß√£o

**PARTE 2: VERIFICA√á√ÉO DE COBERTURA**

Para cada item do ranking:
- Foi mencionado na resposta anterior? Sim/N√£o
- Se SIM: com que profundidade (superficial/adequada/exaustiva)?
- Se N√ÉO: por que pode ter sido omitido? Em que se√ß√£o do documento se encontra?

**PARTE 3: RE-AN√ÅLISE DIRECIONADA**

Para itens N√ÉO cobertos ou superficialmente cobertos:
- Analise-os agora explicitamente
- Explique como mudam/enriquecem compreens√£o do t√≥pico
- Avalie se s√£o genuinamente perif√©ricos OU se foram v√≠timas de vi√©s de recupera√ß√£o

**FUNDAMENTO**: Este protocolo distingue "import√¢ncia" de "similaridade sem√¢ntica", permitindo auditoria manual dos 20% cr√≠ticos.`
            },
            {
                id: 'verificacao-cruzada',
                emoji: '‚úÖ',
                title: 'Verifica√ß√£o Cruzada',
                desc: 'Comparar m√∫ltiplas formula√ß√µes',
                prompt: `**PROMPT DE VERIFICA√á√ÉO CRUZADA**

**INSTRU√á√ïES**: Analise [T√ìPICO] atrav√©s de 3 formula√ß√µes semanticamente DISTINTAS da mesma pergunta.

**Formula√ß√£o A** (Terminologia T√©cnica):
[Sua pergunta usando jarg√£o t√©cnico/conceitos especializados]

**Formula√ß√£o B** (Terminologia Coloquial):
[Mesma pergunta em linguagem n√£o-t√©cnica]

**Formula√ß√£o C** (Frame Invertido):
[Pergunte sobre AUS√äNCIA ou CONTR√ÅRIO do que voc√™ busca]
Ex: Se pergunta √© "Como autor define poder?", Frame C seria "Como autor define resist√™ncia ao poder?"

**AN√ÅLISE DE CONSIST√äNCIA**:
Ap√≥s obter respostas √†s tr√™s formula√ß√µes:
1. Identifique sobreposi√ß√µes (conceitos que apareceram nas 3)
2. Identifique diverg√™ncias (conceitos √∫nicos a cada formula√ß√£o)
3. Avalie: diverg√™ncias revelam nuances genu√≠nas OU vi√©s de recupera√ß√£o?

**S√çNTESE**: Integre insights das 3 formula√ß√µes, explicitando:
- O que √© consenso robusto (aparece nas 3)
- O que √© perspectiva-dependente (varia por formula√ß√£o)
- Que aspectos foram provavelmente PERDIDOS em todas as 3

**FUNDAMENTO**: Triangula√ß√£o sem√¢ntica para detectar e compensar vi√©s de recupera√ß√£o.`
            },
            {
                id: 'teste-contradicao',
                emoji: '‚ö°',
                title: 'Teste de Contradi√ß√£o',
                desc: 'Detectar travamento sem√¢ntico',
                prompt: `**TESTE DE CONTRADI√á√ÉO (Diagn√≥stico de Semantic Locking)**

**HIP√ìTESE**: Se NotebookLM est√° "travado" em certos chunks, ele retornar√° respostas similares mesmo para queries contradit√≥rias.

**PROTOCOLO DE TESTE**:

**Query Original**: [Sua pergunta inicial sobre T√ìPICO]
[Obtenha resposta, anote chunks citados]

**Query Contradit√≥ria**: Reformule para buscar OPOSTO do que perguntou originalmente.
Exemplos:
- Se perguntou sobre "poder", pergunte sobre "impot√™ncia"
- Se perguntou "vantagens", pergunte "desvantagens"
- Se perguntou "continuidades", pergunte "rupturas"

**AN√ÅLISE COMPARATIVA**:
1. As duas respostas citam chunks COMPLETAMENTE DIFERENTES? ‚úì (Bom - sem travamento)
2. As duas respostas citam ALGUNS chunks id√™nticos mas os interpretam diferentemente? ~ (Aceit√°vel)
3. As duas respostas citam MESMOS chunks com interpreta√ß√µes quase id√™nticas? ‚úó (Travamento confirmado)

**A√á√ÉO CORRETIVA SE TRAVAMENTO DETECTADO**:
- Execute refresh do navegador
- Reformule usando terminologia semanticamente distante
- Use prompt de "Reset Cognitivo" acima

**FUNDAMENTO**: Teste adversarial para detectar path dependency antes de confiar em an√°lise.`
            }
        ];

        // Renderizar templates
        function renderTemplates() {
            const structuralContainer = document.getElementById('structuralModes');
            const compensatoryContainer = document.getElementById('compensatoryModes');
            
            structuralModes.forEach(mode => {
                const btn = document.createElement('button');
                btn.className = 'template-btn';
                btn.onclick = () => selectTemplate('structural', mode.id);
                btn.innerHTML = `
                    <div class="emoji">${mode.emoji}</div>
                    <div class="title">${mode.title}</div>
                    <div class="desc">${mode.desc}</div>
                `;
                structuralContainer.appendChild(btn);
            });
            
            compensatoryModes.forEach(mode => {
                const btn = document.createElement('button');
                btn.className = 'template-btn';
                btn.onclick = () => selectTemplate('compensatory', mode.id);
                btn.innerHTML = `
                    <div class="emoji">${mode.emoji}</div>
                    <div class="title">${mode.title}</div>
                    <div class="desc">${mode.desc}</div>
                `;
                compensatoryContainer.appendChild(btn);
            });
        }

        let selectedStructural = null;
        let selectedCompensatory = null;

        function selectTemplate(type, id) {
            if (type === 'structural') {
                selectedStructural = id;
                document.querySelectorAll('#structuralModes .template-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
            } else {
                selectedCompensatory = id;
                document.querySelectorAll('#compensatoryModes .template-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
            }
            
            event.currentTarget.classList.add('active');
        }

        function generatePrompt() {
            const bookTitle = document.getElementById('bookTitle').value;
            const analysisType = document.getElementById('analysisType').value;
            const researchContext = document.getElementById('researchContext').value;
            const customFocus = document.getElementById('customFocus').value;
            
            if (!bookTitle) {
                alert('Por favor, insira o t√≠tulo da obra/corpus.');
                return;
            }
            
            if (!selectedStructural && !selectedCompensatory) {
                alert('Por favor, selecione pelo menos um modo de an√°lise.');
                return;
            }
            
            let prompt = `# PROMPT ESTRATIFICADO PARA NOTEBOOKLM ‚Äî RAG-AWARE

## CONFIGURA√á√ÉO B√ÅSICA

**Obra/Corpus**: ${bookTitle}
**Tipo de An√°lise**: ${analysisType === 'individual' ? 'Livro Individual (an√°lise hol√≠stica)' : analysisType === 'comparative' ? 'Corpus Tem√°tico (2-5 obras)' : 'Corpus Extenso (6-30 obras)'}
${researchContext ? `**Contexto de Pesquisa**: ${researchContext}` : ''}

---

`;

            if (selectedStructural) {
                const mode = structuralModes.find(m => m.id === selectedStructural);
                prompt += `## MODO DE AN√ÅLISE ESTRUTURAL: ${mode.title}\n\n`;
                prompt += mode.prompt + '\n\n---\n\n';
            }
            
            if (selectedCompensatory) {
                const mode = compensatoryModes.find(m => m.id === selectedCompensatory);
                prompt += `## PROMPT COMPENSAT√ìRIO ANTI-VI√âS: ${mode.title}\n\n`;
                prompt += mode.prompt + '\n\n---\n\n';
            }
            
            if (customFocus) {
                prompt += `## FOCO CUSTOMIZADO\n\n${customFocus}\n\n---\n\n`;
            }
            
            prompt += `## DIRETRIZES GERAIS DE RESPOSTA

**Transpar√™ncia de Recupera√ß√£o**: Para cada claim substantivo, cite a se√ß√£o/p√°gina espec√≠fica do documento.

**Explicita√ß√£o de Incertezas**: Se informa√ß√£o solicitada n√£o for encontrada nos chunks recuperados, declare explicitamente: "Esta informa√ß√£o n√£o foi localizada nos segmentos analisados" em vez de inferir.

**Densidade Conceitual**: Mantenha rigor anal√≠tico apropriado ao n√≠vel de densidade da obra. Livros te√≥ricos densos requerem an√°lise conceitual profunda, n√£o simplifica√ß√µes.

**Formato**: Use markdown estruturado (headers, listas, √™nfases) para facilitar leitura e extra√ß√£o.

---

## NOTA SOBRE LIMITA√á√ïES RAG

Este prompt foi projetado considerando as limita√ß√µes arquiteturais do NotebookLM:
- Recupera√ß√£o probabil√≠stica (n√£o determin√≠stica)
- Fragmenta√ß√£o via chunking (leitura n√£o-hol√≠stica)
- Path dependency (travamento em chunks inicialmente recuperados)
- Vi√©s de similaridade sem√¢ntica sobre relev√¢ncia factual

O pesquisador DEVE auditar manualmente a resposta usando protocolos indicados.`;

            document.getElementById('promptOutput').textContent = prompt;
            
            const charCount = prompt.length;
            const countElement = document.getElementById('charCount');
            
            if (charCount > 5000) {
                countElement.innerHTML = `<span class="warning">${charCount.toLocaleString()} caracteres (excede limite NotebookLM: 5.000)</span>`;
            } else {
                countElement.innerHTML = `${charCount.toLocaleString()} caracteres (dentro do limite NotebookLM: 5.000)`;
            }
            
            document.getElementById('outputSection').style.display = 'block';
            document.getElementById('outputSection').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        function copyToClipboard() {
            const promptText = document.getElementById('promptOutput').textContent;
            navigator.clipboard.writeText(promptText).then(() => {
                const btn = document.querySelector('.copy-btn');
                const icon = document.getElementById('copyIcon');
                const text = document.getElementById('copyText');
                
                btn.classList.add('copied');
                icon.textContent = '‚úì';
                text.textContent = 'Copiado!';
                
                setTimeout(() => {
                    btn.classList.remove('copied');
                    icon.textContent = 'üìã';
                    text.textContent = 'Copiar';
                }, 2000);
            }).catch(() => {
                alert('Erro ao copiar. Selecione e copie manualmente o texto.');
            });
        }
        
        // Inicializar
        renderTemplates();
    </script>
</body>
</html>