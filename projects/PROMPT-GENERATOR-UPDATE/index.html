<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laborat√≥rio de Prompts Acad√™micos</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a2e;
            min-height: 100vh;
            color: #e0e0e0;
            padding: 2rem 1rem;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #f0f0f0;
            letter-spacing: -0.5px;
        }

        .header p {
            font-size: 0.95rem;
            color: #a0a0b8;
        }

        .version-badge {
            display: inline-block;
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
            color: #fff;
            font-size: 0.7rem;
            font-weight: 700;
            padding: 0.2rem 0.55rem;
            border-radius: 6px;
            margin-left: 0.5rem;
            vertical-align: middle;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .card {
            background: #16213e;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.4), 0 2px 6px 1px rgba(0, 0, 0, 0.25);
            margin-bottom: 1.5rem;
            transition: box-shadow 0.2s ease;
            border: 1px solid #2a2a4a;
        }

        .card:hover {
            box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.4), 0 6px 16px 4px rgba(124, 58, 237, 0.1);
        }

        .input-section {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #c8c8d8;
            font-size: 0.9rem;
        }

        input,
        textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #2a2a4a;
            border-radius: 8px;
            font-size: 0.95rem;
            font-family: inherit;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            background: #1e1e3a;
            color: #e0e0e0;
        }

        input:focus,
        textarea:focus {
            outline: none;
            border-color: #7c3aed;
            box-shadow: 0 0 0 4px rgba(124, 58, 237, 0.15);
        }

        input::placeholder,
        textarea::placeholder {
            color: #6b6b8a;
        }

        .section-label {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 600;
            color: #c8c8d8;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.85rem;
            margin-top: 0.25rem;
        }

        .section-label::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #2a2a4a;
        }

        .section-label.interdisciplinar {
            color: #a78bfa;
        }

        .section-label.interdisciplinar::after {
            background: #3b2d6b;
        }

        .templates {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
            gap: 0.65rem;
            margin-bottom: 0.5rem;
        }

        .template-btn {
            background: #1e1e3a;
            border: 1px solid #2a2a4a;
            padding: 0.85rem 1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            font-size: 0.875rem;
            color: #d0d0e0;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .template-btn:hover {
            background: #252548;
            border-color: #7c3aed;
            transform: translateY(-1px);
        }

        .template-btn.active {
            background: linear-gradient(135deg, #2d1b69 0%, #1e1145 100%);
            border-color: #7c3aed;
            color: #c4b5fd;
        }

        .template-btn.inter {
            border-color: #3b2d6b;
            background: #1e1845;
        }

        .template-btn.inter:hover {
            border-color: #a78bfa;
            background: #2a2060;
        }

        .template-btn.inter.active {
            background: linear-gradient(135deg, #3b2d6b 0%, #2d1b69 100%);
            border-color: #a78bfa;
            color: #ddd6fe;
        }

        .template-btn span {
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .generate-btn {
            background: #7c3aed;
            color: white;
            border: none;
            padding: 0.875rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
            box-shadow: 0 2px 8px 0 rgba(124, 58, 237, 0.3);
        }

        .generate-btn:hover {
            background: #6d28d9;
            box-shadow: 0 4px 16px 0 rgba(124, 58, 237, 0.4);
        }

        .generate-btn:active {
            background: #5b21b6;
        }

        .toggle-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.9rem 1rem;
            border: 1px solid #2a2a4a;
            border-radius: 8px;
            background: #1e1e3a;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 1.25rem;
            user-select: none;
        }

        .toggle-row:hover {
            border-color: #7c3aed;
            background: #252548;
        }

        .toggle-row.on {
            border-color: #f59e0b;
            background: #2a2415;
        }

        .toggle-switch {
            width: 36px;
            height: 20px;
            border-radius: 10px;
            background: #ccc;
            position: relative;
            flex-shrink: 0;
            transition: background 0.2s;
        }

        .toggle-switch.on {
            background: #f59e0b;
        }

        .toggle-knob {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: white;
            transition: left 0.2s;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .toggle-switch.on .toggle-knob {
            left: 19px;
        }

        .toggle-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: #d0d0e0;
        }

        .toggle-desc {
            font-size: 0.8rem;
            color: #8888a8;
            margin-left: auto;
        }

        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .output-header h3 {
            font-size: 1.1rem;
            font-weight: 500;
            color: #e0e0e0;
        }

        .output-box {
            background: #121228;
            border: 1px solid #2a2a4a;
            border-radius: 8px;
            padding: 1.25rem;
            font-family: 'Roboto Mono', 'Consolas', 'Monaco', monospace;
            font-size: 0.82rem;
            line-height: 1.65;
            white-space: pre-wrap;
            max-height: 520px;
            overflow-y: auto;
            color: #d0d0e0;
        }

        .copy-btn {
            background: #7c3aed;
            color: white;
            border: none;
            padding: 0.625rem 1.25rem;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .copy-btn:hover {
            background: #6d28d9;
        }

        .copy-btn.copied {
            background: #059669;
        }

        .char-count {
            font-size: 0.8rem;
            color: #8888a8;
            margin-top: 0.75rem;
            padding: 0.5rem 0.75rem;
            background: #1e1e3a;
            border-radius: 6px;
            display: inline-block;
        }

        .warning {
            color: #f87171;
            font-weight: 500;
        }

        .focus-recommended {
            border-color: #7c3aed !important;
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.15);
        }

        .recommended-badge {
            color: #a78bfa;
            font-weight: 600;
            font-size: 0.85rem;
        }

        @media(max-width:768px) {
            .templates {
                grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
            }

            .header h1 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üî¨ Laborat√≥rio de Prompts Acad√™micos <span class="version-badge">v2.0</span></h1>
            <p>Toolkit avan√ßado para an√°lise profunda, s√≠ntese interdisciplinar e guardrails epist√™micos</p>
        </div>

        <div class="card">
            <div class="input-section">
                <label for="reportType">Tipo de Relat√≥rio Desejado:</label>
                <input type="text" id="reportType" placeholder="Descreva o tipo de an√°lise que voc√™ precisa...">
            </div>

            <div class="input-section">
                <div class="section-label">An√°lise de Fonte(s)</div>
                <div class="templates" id="tpl-base">
                    <div class="template-btn" onclick="sel('arquivo',event)"><span>üìã</span> Arquivo de Refer√™ncia</div>
                    <div class="template-btn" onclick="sel('projeto',event)"><span>üéØ</span> S√≠ntese para Projeto</div>
                    <div class="template-btn" onclick="sel('ensaio',event)"><span>‚úçÔ∏è</span> Quest√µes Ensa√≠sticas</div>
                    <div class="template-btn" onclick="sel('macrotemas',event)"><span>üó∫Ô∏è</span> Mapeador de Temas</div>
                    <div class="template-btn" onclick="sel('lacunas',event)"><span>üîç</span> An√°lise de Lacunas</div>
                    <div class="template-btn" onclick="sel('codificacao',event)"><span>üß¨</span> Codifica√ß√£o Tem√°tica
                    </div>
                    <div class="template-btn" onclick="sel('arqueologia',event)"><span>üî¨</span> Arqueologia Conceitual
                    </div>
                    <div class="template-btn" onclick="sel('podcast',event)"><span>üéôÔ∏è</span> Roteiro Podcast</div>
                    <div class="template-btn" onclick="sel('dialetica',event)"><span>‚öñÔ∏è</span> Lente Dial√©tica</div>
                    <div class="template-btn" onclick="sel('desilusao',event)"><span>üîì</span> Filtro Desilus√£o</div>
                    <div class="template-btn" onclick="sel('antitese',event)"><span>üîÑ</span> M√©todo Ant√≠tese</div>
                    <div class="template-btn" onclick="sel('feynman',event)"><span>üí°</span> T√©cnica Feynman</div>
                    <div class="template-btn" onclick="sel('mapalit',event)"><span>üåê</span> Mapa Literatura</div>
                    <div class="template-btn" onclick="sel('definidor',event)"><span>üìñ</span> Definidor Contextual
                    </div>
                    <div class="template-btn" onclick="sel('pressupostos',event)"><span>üî¨</span> Arqueologia de
                        Pressupostos</div>
                    <div class="template-btn" onclick="sel('timeline',event)"><span>üìÖ</span> Linha do Tempo</div>
                </div>

                <div class="section-label interdisciplinar" style="margin-top:1.25rem;">S√≠ntese Multi-fonte
                    Interdisciplinar</div>
                <div class="templates" id="tpl-inter">
                    <div class="template-btn inter" onclick="sel('cartografia',event)"><span>üóÇÔ∏è</span> Cartografia
                        Disciplinar</div>
                    <div class="template-btn inter" onclick="sel('convergencias',event)"><span>‚ÜîÔ∏è</span> Converg√™ncias &
                        Diverg√™ncias</div>
                    <div class="template-btn inter" onclick="sel('pontes',event)"><span>üåâ</span> Pontes Conceituais
                    </div>
                    <div class="template-btn inter" onclick="sel('sintese_critica',event)"><span>üîÄ</span> Caminhos de
                        S√≠ntese</div>
                    <div class="template-btn inter" onclick="sel('tensionamento',event)"><span>‚ö°</span> Tensionamento
                        Produtivo</div>
                </div>
            </div>

            <div class="input-section">
                <label for="customFocus">Foco Espec√≠fico <span id="recommendedLabel" class="recommended-badge"
                        style="display:none;">(recomendado)</span>:</label>
                <textarea id="customFocus" rows="3"
                    placeholder="Descreva aspectos espec√≠ficos que devem ser priorizados na an√°lise..."></textarea>
            </div>

            <div class="toggle-row" id="guardrailToggle" onclick="toggleGuardrail()">
                <div class="toggle-switch" id="toggleSwitch">
                    <div class="toggle-knob"></div>
                </div>
                <span class="toggle-label">üõ°Ô∏è Modo Rigoroso (Guardrail)</span>
                <span class="toggle-desc" id="toggleDesc">Injeta diretrizes anti-alucina√ß√£o no prompt</span>
            </div>

            <button class="generate-btn" onclick="generatePrompt()">üöÄ Gerar Prompt</button>
        </div>

        <div class="card" id="outputSection" style="display:none;">
            <div class="output-header">
                <h3>Prompt Gerado</h3>
                <button class="copy-btn" onclick="copyToClipboard()">
                    <span id="copyIcon">üìã</span><span id="copyText">Copiar</span>
                </button>
            </div>
            <div class="output-box" id="promptOutput"></div>
            <div class="char-count" id="charCount"></div>
        </div>
    </div>

    <script>
        let activeTemplate = null;
        let guardrailOn = false;

        const templates = {
            arquivo: 'arquivo de refer√™ncia consultivo com cita√ß√µes ABNT e mapeamento epistemol√≥gico',
            projeto: 's√≠ntese tem√°tica para desenvolvimento de pesquisa original',
            ensaio: 'extra√ß√£o de quest√µes ensa√≠sticas complexas e problematiza√ß√µes cr√≠ticas',
            macrotemas: 'mapeamento de macrotemas com quest√µes fundamentais para discuss√£o aprofundada',
            lacunas: 'an√°lise sistem√°tica de lacunas metodol√≥gicas, te√≥ricas e emp√≠ricas com quest√µes de pesquisa derivadas',
            codificacao: 'an√°lise tem√°tica com codifica√ß√£o rigorosa, identifica√ß√£o de padr√µes e triangula√ß√£o de achados',
            arqueologia: 'arqueologia conceitual revelando pressupostos ocultos e mapeando interpreta√ß√µes alternativas plaus√≠veis',
            podcast: 'roteiro modular para podcast com arquitetura narrativa e scripts implement√°veis no NotebookLM',
            dialetica: 'debate acad√™mico estruturado entre perspectivas opostas fundamentadas nas fontes',
            desilusao: 'an√°lise cr√≠tica sob perspectiva de quem abandonou determinada cren√ßa ou interpreta√ß√£o',
            antitese: 'identifica√ß√£o de teses centrais e desenvolvimento sistem√°tico de contraposi√ß√µes',
            feynman: 'an√°lise pedag√≥gica com clarifica√ß√£o conceitual, identifica√ß√£o de lacunas e constru√ß√£o de modelos mentais',
            mapalit: 'mapeamento sistem√°tico de literatura com an√°lise de cita√ß√µes, debates e frameworks te√≥ricos',
            definidor: 'gloss√°rio contextual com defini√ß√µes precisas de termos-chave extra√≠dos das fontes',
            pressupostos: 'arqueologia sistem√°tica de pressupostos ocultos com desenvolvimento de interpreta√ß√µes alternativas fundamentadas',
            timeline: 'linha do tempo cronol√≥gica detalhada com eventos ordenados e elenco de personagens principais',
            cartografia: 'cartografia disciplinar mapeando como cada tradi√ß√£o intelectual habita o mesmo problema',
            convergencias: 'mapeamento sistem√°tico de converg√™ncias genu√≠nas, diverg√™ncias irredut√≠veis e zonas de tens√£o produtiva entre fontes heterog√™neas',
            pontes: 'identifica√ß√£o de pontes conceituais e falsos cognatos entre tradi√ß√µes disciplinares distintas',
            sintese_critica: 'mapeamento de caminhos de s√≠ntese poss√≠veis com explicita√ß√£o dos custos e sacrif√≠cios de cada rota',
            tensionamento: 'tensionamento produtivo entre fontes de tradi√ß√µes distintas para gerar fric√ß√£o epist√™mica iluminadora'
        };

        const placeholders = {
            arquivo: 'Ex: priorizar cita√ß√µes para fundamenta√ß√£o de argumento X, mapear tradi√ß√µes te√≥ricas sobre Y...',
            projeto: 'Ex: aplicabilidade ao projeto sobre Z, transferibilidade conceitual para contexto brasileiro...',
            ensaio: 'Ex: problematiza√ß√µes sobre rela√ß√£o teoria/pr√°tica, tens√µes epistemol√≥gicas em campo X...',
            macrotemas: 'Ex: priorizar temas relacionados a pol√≠ticas p√∫blicas, focar intersec√ß√µes disciplinares...',
            lacunas: 'Ex: priorizar lacunas metodol√≥gicas, foco em estudos no contexto brasileiro...',
            codificacao: 'Ex: usar framework de an√°lise tem√°tica reflexiva, priorizar c√≥digos √™micos...',
            arqueologia: 'Ex: investigar pressuposto de neutralidade cient√≠fica, examinar cren√ßa na meritocracia...',
            podcast: 'Ex: audi√™ncia n√£o-especializada, tom conversacional mas rigoroso, dura√ß√£o 30-40min...',
            dialetica: 'Ex: debate entre perspectiva marxista vs liberal, tens√£o qualitativo vs quantitativo...',
            desilusao: 'Ex: examinar criticamente teoria da escolha racional, desilus√£o com positivismo l√≥gico...',
            antitese: 'Ex: focar ant√≠teses metodol√≥gicas, priorizar contradi√ß√µes ontol√≥gicas...',
            feynman: 'Ex: simplificar conceito de habitus, explicar teoria dos sistemas complexos para leigos...',
            mapalit: 'Ex: priorizar literatura emp√≠rica dos √∫ltimos 10 anos, focar tradi√ß√£o europeia...',
            definidor: 'Ex: definir termos t√©cnicos de teoria cr√≠tica, gloss√°rio de conceitos foucaultianos...',
            pressupostos: 'Ex: investigar pressuposto de objetividade na pesquisa qualitativa...',
            timeline: 'Ex: priorizar eventos pol√≠ticos sobre culturais, focar desenvolvimento institucional...',
            cartografia: 'Ex: notebook sobre ML com textos t√©cnicos (Papers/docs), sociais (STS, sociologia) e filos√≥ficos (filosofia da mente, √©tica). Quero ver como cada tradi√ß√£o enquadra o problema de ag√™ncia em sistemas aut√¥nomos.',
            convergencias: 'Ex: quero saber onde textos t√©cnicos e filos√≥ficos REALMENTE concordam sobre limites do aprendizado supervisionado vs onde parecem concordar mas usam palavras diferentes para coisas distintas.',
            pontes: 'Ex: o conceito de "modelo" em machine learning vs "modelo" em filosofia da ci√™ncia ‚Äî mesmo nome, premissas radicalmente diferentes. Quero mapear esse tipo de falso cognato e tamb√©m os cognatos genu√≠nos.',
            sintese_critica: 'Ex: dado que os textos t√©cnicos assumem X e os filos√≥ficos rejeitam X, que s√≠nteses s√£o poss√≠veis? Quero ver as 2-3 rotas mais plaus√≠veis com o que cada uma sacrifica.',
            tensionamento: 'Ex: colocar um paper de deep learning em confronto direto com um texto de filosofia da percep√ß√£o ‚Äî o que cada um revelaria de cego no outro?'
        };

        const highlyBenefited = ['podcast', 'projeto', 'dialetica', 'desilusao', 'antitese', 'arqueologia', 'pressupostos', 'cartografia', 'convergencias', 'pontes', 'sintese_critica', 'tensionamento'];

        function sel(type, e) {
            document.querySelectorAll('.template-btn').forEach(b => b.classList.remove('active'));
            e.target.closest('.template-btn').classList.add('active');
            document.getElementById('reportType').value = templates[type];
            activeTemplate = type;
            const cf = document.getElementById('customFocus');
            cf.placeholder = placeholders[type] || 'Descreva aspectos espec√≠ficos que devem ser priorizados...';
            const rl = document.getElementById('recommendedLabel');
            if (highlyBenefited.includes(type)) { cf.classList.add('focus-recommended'); rl.style.display = 'inline'; }
            else { cf.classList.remove('focus-recommended'); rl.style.display = 'none'; }
        }

        function toggleGuardrail() {
            guardrailOn = !guardrailOn;
            const sw = document.getElementById('toggleSwitch');
            const row = document.getElementById('guardrailToggle');
            const desc = document.getElementById('toggleDesc');
            sw.classList.toggle('on', guardrailOn);
            row.classList.toggle('on', guardrailOn);
            desc.textContent = guardrailOn
                ? 'Ativo ‚Äî guardrails epist√™micos ser√£o inclu√≠dos no prompt'
                : 'Injeta diretrizes anti-alucina√ß√£o no prompt';
        }

        const GUARDRAIL = `
**GUARDRAILS EPIST√äMICOS (ATIVOS)**:
Siga rigorosamente ao responder:
‚Ä¢ Cada afirma√ß√£o = cita√ß√£o inline na mesma frase [n]. Nunca separe claim de cita√ß√£o.
‚Ä¢ Diverg√™ncias entre fontes: exponha sem harmonizar artificialmente. Se divergem, divergem.
‚Ä¢ Lacunas: declare explicitamente o que n√£o est√° nas fontes. "N√£o est√° l√°" √© uma resposta v√°lida e necess√°ria.
‚Ä¢ S√≠ntese multi-fonte: mostre o que CADA fonte diz separadamente ANTES de qualquer s√≠ntese. Marque a s√≠ntese como interpreta√ß√£o sua, n√£o como o que as fontes afirmam.
‚Ä¢ Infer√™ncias: identifique como interpreta√ß√£o ("eu inferiria X combinando [2] e [5], mas nenhuma fonte diz X diretamente").
‚Ä¢ Incerteza fraca: quantifique ("confian√ßa baixa ~30%") em vez de suavizar ("provavelmente", "sugere").
‚Ä¢ Imagens em PDFs, outros notebooks, vers√µes atualizadas: sinalize a limita√ß√£o explicitamente.
‚Ä¢ Lembre o usu√°rio de verificar cita√ß√µes clicando nos [n√∫meros], especialmente em transcri√ß√µes de √°udio/v√≠deo.`;

        const specificInstructions = {
            lacunas: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA AN√ÅLISE DE LACUNAS**:
Identifique sistematicamente tr√™s categorias:
(a) **Metodol√≥gicas**: aus√™ncias em abordagens, t√©cnicas ou instrumentos
(b) **Te√≥ricas**: gaps conceituais, frameworks n√£o aplicados, di√°logos ausentes
(c) **Emp√≠ricas/Contextuais**: popula√ß√µes n√£o estudadas, contextos inexplorados

Para cada lacuna: descri√ß√£o sint√©tica (uma frase) + fonte que a evidencia + quest√£o de pesquisa derivada.`,

            codificacao: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA CODIFICA√á√ÉO TEM√ÅTICA**:
Processo em tr√™s etapas:
1. **Codifica√ß√£o Inicial**: padr√µes significativos, frases-chave, terminologia √™mica preservada.
2. **Desenvolvimento Tem√°tico**: agrupamento em temas, hierarquias, frequ√™ncia e distribui√ß√£o.
3. **Triangula√ß√£o**: coer√™ncia, interpreta√ß√µes alternativas, tens√µes e casos desviantes.
Apresente em formato audit√°vel.`,

            arqueologia: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA ARQUEOLOGIA CONCEITUAL**:

**1. CONTEXTUALIZA√á√ÉO** ‚Äî Panorama da cren√ßa/interpreta√ß√£o, por que investigar seus pressupostos.

**2. ARQUEOLOGIA** ‚Äî Para cada pressuposto: como se manifesta, por que n√£o √© aparente, que tradi√ß√µes o sustentam, que quest√µes evita, como pressupostos alternativos mudariam as conclus√µes. Progrida do evidente ao sutil.

**3. INTERPRETA√á√ïES ALTERNATIVAS** ‚Äî Para cada alternativa: como reconceptualiza o fen√¥meno, que pressupostos adota, que evid√™ncias privilegia, que insights √∫nicos gera.

**4. S√çNTESE REFLEXIVA** ‚Äî Como a multiplicidade enriquece a compreens√£o. Quest√µes que permanecem abertas.

**DIRETRIZES**: Neutralidade anal√≠tica, imagina√ß√£o disciplinada, pedagogia progressiva.`,

            podcast: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA ROTEIRO DE PODCAST**:

**INSTRU√á√ïES FUNDAMENTAIS**:
- Foque APENAS em conte√∫do extra√≠do diretamente das fontes
- Use SCRIPTS DIRETOS: "Diga exatamente: [texto]" ou "Comece explicando que [conceito]"
- N√ÉO mencione: tom de voz, m√∫sica, pausas, entona√ß√µes (n√£o funciona no NotebookLM)

**SEGMENTO 1 ‚Äî ABERTURA**: Script de abertura + contexto essencial + gancho narrativo + roadmap dos pontos.

**SEGMENTO 2 ‚Äî DESENVOLVIMENTO**: 3 pontos conceituais das fontes, cada um com script implement√°vel e conex√µes entre si.

**SEGMENTO 3 ‚Äî S√çNTESE**: Recapitula√ß√£o + conex√µes interdisciplinares + quest√£o aberta ao ouvinte.

**SEGMENTO 4 (opcional) ‚Äî ENCERRAMENTO**: Takeaway principal + fechamento + gancho para reflex√£o.

‚úì Funciona: "Diga que...", scripts entre aspas, perguntas ret√≥ricas.
‚úó N√£o funciona: "Use tom entusiasmado", "Fa√ßa pausa dram√°tica", instru√ß√µes vocais.`,

            dialetica: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA LENTE DIAL√âTICA**:

**1. TESES CENTRAIS** ‚Äî 2-3 teses com cita√ß√£o espec√≠fica e relev√¢ncia no contexto geral.

**2. PERSPECTIVAS OPOSTAS** ‚Äî Para cada tese, desenvolva PERSPECTIVA A e PERSPECTIVA B: posicionamento, argumentos, evid√™ncias, implica√ß√µes, tradi√ß√£o epistemol√≥gica. Ambas fundamentadas nas fontes.

**3. DI√ÅLOGO DIAL√âTICO** ‚Äî Fric√ß√µes espec√≠ficas, contra-argumentos, evid√™ncias privilegiadas, quest√µes que cada perspectiva responde melhor, limita√ß√µes.

**4. S√çNTESE CR√çTICA** ‚Äî Insights √∫nicos, o que cada interpreta√ß√£o revela/obscurece, poss√≠veis terceiras vias, trade-offs expl√≠citos.

**DIRETRIZES**: Fidelidade √†s fontes, rigor argumentativo, equil√≠brio epist√™mico ‚Äî n√£o harmonize artificialmente.`,

            desilusao: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA FILTRO DESILUS√ÉO**:

**1. RECONSTRU√á√ÉO** ‚Äî Promessas da teoria, sua l√≥gica interna, por que √© inicialmente persuasiva.
**2. GENEALOGIA DA DESILUS√ÉO** ‚Äî Promessas n√£o cumpridas, pressupostos question√°veis, custos ocultos.
**3. RELEITURA CR√çTICA** ‚Äî Tens√µes internas, evid√™ncias resistentes, alternativas sugeridas mas n√£o desenvolvidas.
**4. FRAMEWORK ALTERNATIVO** ‚Äî Reinterpreta√ß√£o dos mesmos fen√¥menos; o que explica melhor.
**5. S√çNTESE META-CR√çTICA** ‚Äî O que a desilus√£o revela, que insights preserva, que vigil√¢ncia epistemol√≥gica sugere.

**TOM**: Quem examinou seriamente e identificou limita√ß√µes ‚Äî n√£o quem ridiculariza superficialmente.`,

            antitese: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA M√âTODO ANT√çTESE**:

**1. TESES** ‚Äî 3-5 teses: formula√ß√£o precisa, cita√ß√£o, pressupostos, tipo (ontol√≥gica, metodol√≥gica, normativa...).
**2. ANT√çTESES** ‚Äî Para cada tese: enunciado da contraposi√ß√£o, fundamenta√ß√£o nas fontes, tradi√ß√£o intelectual, an√°lise comparativa (o que cada uma privilegia e responde melhor).
**3. MAPEAMENTO DE TENS√ïES** ‚Äî Contradi√ß√£o l√≥gica? Tens√£o dial√©tica? Complementaridade? Ambiguidade resolv√≠vel?
**4. ESTRAT√âGIAS DE S√çNTESE** ‚Äî S√≠ntese dial√©tica / pluralismo metodol√≥gico / dissolu√ß√£o / incomensurabilidade.
**5. QUEST√ïES DERIVADAS** ‚Äî Emp√≠ricas, experimentos conceituais, casos-limite, condi√ß√µes de aplicabilidade.`,

            feynman: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA T√âCNICA FEYNMAN**:

**1. CLARIFICA√á√ÉO CONCEITUAL** ‚Äî Reformule sem jarg√£o, analogias do cotidiano, decomposi√ß√£o em elementos b√°sicos. Teste: "Como explicaria a algu√©m fora da √°rea?"
**2. LACUNAS** ‚Äî Compreens√£o (o que as fontes assumem), Justifica√ß√£o (premissas n√£o demonstradas), Aplica√ß√£o (exemplos pr√°ticos ausentes).
**3. MODELOS MENTAIS** ‚Äî N√∫cleo irredut√≠vel, 2-3 analogias com seus limites, exemplos concretos incluindo casos-limite.
**4. QUEST√ïES** ‚Äî Que testem compreens√£o profunda, aplica√ß√£o pr√°tica e conex√µes interdisciplinares.`,

            mapalit: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA MAPA DE LITERATURA**:

**1. CLUSTERS TEM√ÅTICOS** ‚Äî 4-6 grupos: fontes, justificativa, sobreposi√ß√µes, fontes isoladas.
**2. FRAMEWORKS TE√ìRICOS** ‚Äî Tradi√ß√µes, conceitos-chave, pressupostos, di√°logos vs. tens√µes.
**3. ABORDAGENS METODOL√ìGICAS** ‚Äî Classifica√ß√£o, inova√ß√µes, pontos fortes e limita√ß√µes.
**4. DEBATES CENTRAIS** ‚Äî 3-5 controv√©rsias: fontes em cada lado, pontos de discord√¢ncia, estado atual.
**5. LACUNAS** ‚Äî Tem√°ticas, metodol√≥gicas, te√≥ricas.
**6. ESTRUTURA CITACIONAL** ‚Äî Hubs, pontes entre tradi√ß√µes, top 5-10 papers.
**7. S√çNTESE** ‚Äî Estado da arte, consensos, incertezas, agenda futura.`,

            definidor: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA GLOSS√ÅRIO CONTEXTUAL**:

Extraia 10-20 termos-chave. Para cada um:

**DEFINI√á√ÉO CONTEXTUAL** (2-4 frases) ‚Äî Como usado especificamente nas fontes; distinga do uso gen√©rico.

**EXPLICA√á√ÉO ANAL√çTICA** (1-2 par√°grafos) ‚Äî Nuances, implica√ß√µes, conex√µes com outros conceitos do gloss√°rio.

Use: Compara√ß√£o Contrastiva, Exemplifica√ß√£o com passagens, Rastreamento hist√≥rico do termo, Conex√µes entre verbetes.

Organize alfabeticamente ou por import√¢ncia conceitual (explicite o crit√©rio).`,

            pressupostos: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA ARQUEOLOGIA DE PRESSUPOSTOS**:

**1. CONTEXTUALIZA√á√ÉO** ‚Äî Qual cren√ßa/interpreta√ß√£o, por que investigar, que insights podem emergir.
**2. ARQUEOLOGIA** ‚Äî Para cada pressuposto: manifesta√ß√£o, opacidade, tradi√ß√µes que o sustentam, quest√µes que evita, como alternativas mudariam as conclus√µes. Progrida do evidente ao sutil.
**3. ALTERNATIVAS** ‚Äî Para cada interpreta√ß√£o alternativa: reconceptualiza√ß√£o, pressupostos adotados, evid√™ncias privilegiadas, insights √∫nicos, pontos cegos.
**4. S√çNTESE REFLEXIVA** ‚Äî Enriquecimento pela multiplicidade; quest√µes abertas.

**T√âCNICAS**: Desconstru√ß√£o gentil, Rota√ß√£o de lentes, Questionamento socr√°tico, Exemplifica√ß√£o.`,

            timeline: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA LINHA DO TEMPO**:

**PARTE 1 ‚Äî EVENTOS**: Data | Evento | Resumo (2-3 frases) | Fonte | Status (CONFIRMADO/INFERIDO/INCERTO). Ordem cronol√≥gica estrita. NUNCA invente datas. Para inferidas, explicite a base.

**PARTE 2 ‚Äî ELENCO**: Nome completo | Papel | Biografia (3-4 frases) | Apari√ß√µes na timeline | Fontes.

**S√çNTESE CROSS-DOCUMENT**: Sequ√™ncias s√≥ vis√≠veis combinando fontes; contradi√ß√µes de data√ß√£o; gaps temporais significativos. Cite fonte espec√≠fica para cada evento.`,

            // ‚îÄ‚îÄ INTERDISCIPLINAR ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

            cartografia: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA CARTOGRAFIA DISCIPLINAR**:

Este notebook cont√©m fontes de tradi√ß√µes intelectuais distintas (ex: t√©cnica, social, filos√≥fica). O objetivo √© mapear como CADA tradi√ß√£o habita o mesmo problema ‚Äî n√£o produzir s√≠ntese prematura.

**1. IDENTIFICA√á√ÉO DE TRADI√á√ïES**
Liste as tradi√ß√µes/disciplinas presentes nas fontes. Para cada uma:
- Fontes pertencentes a essa tradi√ß√£o
- Vocabul√°rio t√©cnico caracter√≠stico
- Perguntas que essa tradi√ß√£o consegue formular
- Perguntas que essa tradi√ß√£o N√ÉO consegue formular (pontos cegos estruturais)
- Pressupostos ontol√≥gicos e epistemol√≥gicos de base

**2. MAPA POR PROBLEMA**
Selecione 3-5 problemas ou quest√µes centrais do tema do notebook. Para cada problema, mostre em tabela:

| Problema | Tradi√ß√£o A | Tradi√ß√£o B | Tradi√ß√£o C |
|----------|-----------|-----------|-----------|
| Como enquadra? | ... | ... | ... |
| Que evid√™ncias mobiliza? | ... | ... | ... |
| Que solu√ß√£o prop√µe? | ... | ... | ... |
| Que pressuposto central? | ... | ... | ... |

**3. VOCABUL√ÅRIO COMPARADO**
Identifique termos que CADA tradi√ß√£o usa para fen√¥menos similares. Organize em tabela:

| Fen√¥meno | Termo (Tradi√ß√£o A) | Termo (Tradi√ß√£o B) | Cognatos genu√≠nos? |
|---------|------------------|------------------|-------------------|

**4. ASSIMETRIAS ESTRUTURAIS**
- Que tradi√ß√£o tem mais fontes/peso no notebook? Que vi√©s isso introduz?
- Que perspectiva est√° sub-representada?
- Que aspectos do problema s√≥ UMA tradi√ß√£o consegue articular?

**5. MAPA RESULTANTE**
Produza descri√ß√£o textual da "paisagem disciplinar" do notebook: quem fala com quem, quem ignora quem, onde h√° muros disciplinares e onde h√° zonas de contato.`,

            convergencias: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA CONVERG√äNCIAS & DIVERG√äNCIAS**:

**ATEN√á√ÉO CR√çTICA**: Distingua cuidadosamente entre:
- **Converg√™ncia genu√≠na**: fontes de tradi√ß√µes distintas chegam √† mesma conclus√£o por caminhos independentes
- **Converg√™ncia aparente**: usam a mesma palavra mas significam coisas diferentes
- **Diverg√™ncia irredut√≠vel**: desacordo de premissas, n√£o de dados ‚Äî n√£o tem "solu√ß√£o"
- **Diverg√™ncia resol√∫vel**: desacordo emp√≠rico ou terminol√≥gico que pode ser mediado

**1. MAPEAMENTO DE CONVERG√äNCIAS**
Para cada converg√™ncia identificada:
- Que fontes convergem (cite especificamente)
- Em que exatamente concordam (formula√ß√£o precisa)
- Classifica√ß√£o: genu√≠na ou aparente?
- Se genu√≠na: que fortaleza epist√™mica isso confere √† posi√ß√£o?
- Se aparente: onde exatamente a semelhan√ßa superficial esconde diferen√ßa real?

**2. MAPEAMENTO DE DIVERG√äNCIAS**
Para cada diverg√™ncia:
- Que fontes divergem e em que ponto espec√≠fico
- Tipo: premissas diferentes? M√©todos diferentes? Dados diferentes? Valores diferentes?
- Irredut√≠vel ou resol√∫vel?
- Se irredut√≠vel: qual √© o n√∫cleo do desacordo (n√£o tente harmonizar)?
- Se resol√∫vel: que informa√ß√£o adicional ou clarifica√ß√£o conceitual mediaria?

**3. ZONAS DE TENS√ÉO PRODUTIVA**
Identifique diverg√™ncias que, embora irresolvidas, ILUMINAM algo importante sobre o problema. Que cada perspectiva revela que a outra n√£o v√™?

**4. TABELA S√çNTESE**

| Aspecto | Fontes que concordam | Fontes que discordam | Tipo | Resol√∫vel? |
|---------|---------------------|---------------------|------|-----------|

**5. IMPLICA√á√ïES**
- Que quest√µes do campo s√≥ ficam vis√≠veis quando voc√™ v√™ as converg√™ncias/diverg√™ncias juntas?
- Que consensos s√£o mais s√≥lidos? Quais s√£o apenas aparentes?
- Que diverg√™ncias indicam que o campo est√° genuinamente partido em premissas?`,

            pontes: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA PONTES CONCEITUAIS**:

Fontes de tradi√ß√µes distintas frequentemente usam conceitos similares com significados diferentes, ou usam palavras diferentes para o mesmo fen√¥meno. Este template mapeia ambos.

**1. COGNATOS GENU√çNOS** (mesmo fen√¥meno, vocabul√°rio diferente)
Para cada par/grupo identificado:
- Termo em Tradi√ß√£o A + cita√ß√£o de uso
- Termo correspondente em Tradi√ß√£o B + cita√ß√£o de uso
- Por que s√£o o mesmo fen√¥meno (argumento expl√≠cito)
- O que cada tradi√ß√£o V√ä que a outra n√£o v√™ sobre esse fen√¥meno
- Qual terminologia captura melhor qual aspecto?

**2. FALSOS COGNATOS** (mesma palavra, fen√¥menos diferentes)
Para cada falso cognato identificado:
- Palavra compartilhada
- Defini√ß√£o/uso em Tradi√ß√£o A + cita√ß√£o
- Defini√ß√£o/uso em Tradi√ß√£o B + cita√ß√£o
- Em que exatamente o significado diverge
- Que confus√µes essa homon√≠mia pode gerar num leitor interdisciplinar
- Proposta de desambigua√ß√£o (se poss√≠vel)

**3. CONCEITOS √ìRF√ÉOS**
- Que conceitos de uma tradi√ß√£o n√£o t√™m equivalente nas outras?
- O que essa aus√™ncia revela sobre o que cada tradi√ß√£o consegue pensar?

**4. MAPA DE PONTES**
Produza tabela geral:

| Conceito/Fen√¥meno | Tradi√ß√£o A | Tradi√ß√£o B | Tradi√ß√£o C | Tipo de rela√ß√£o |
|------------------|-----------|-----------|-----------|----------------|

**5. IMPLICA√á√ïES PARA DI√ÅLOGO**
- Que mal-entendidos interdisciplinares t√≠picos essas fontes revelam?
- Onde um pesquisador formado numa tradi√ß√£o precisaria de "tradutor" para ler as outras?
- Que pontes conceituais facilitariam mais o di√°logo entre essas tradi√ß√µes?`,

            sintese_critica: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA CAMINHOS DE S√çNTESE**:

**PREMISSA METODOL√ìGICA**: Toda s√≠ntese de fontes heterog√™neas √© uma ESCOLHA ‚Äî ela resolve algumas tens√µes sacrificando outras. Este template mapeia as rotas dispon√≠veis e seus custos, sem fingir que existe s√≠ntese neutra.

**PASSO 0: INVENT√ÅRIO DE TENS√ïES**
Antes de propor s√≠nteses, liste as tens√µes irredut√≠veis identificadas nas fontes:
- Tens√µes ontol√≥gicas (o que existe?)
- Tens√µes epistemol√≥gicas (como conhecemos?)
- Tens√µes metodol√≥gicas (como investigamos?)
- Tens√µes normativas (o que importa?)

**PASSO 1: IDENTIFICA√á√ÉO DE ROTAS**
Identifique 2-4 caminhos de s√≠ntese plaus√≠veis. Para cada rota:

**Nome da Rota**: [ex: "S√≠ntese Instrumentalista", "Pluralismo Metodol√≥gico", "Hierarquia Disciplinar"]

**L√≥gica**: Como essa rota prop√µe integrar as fontes?

**O que preserva**: Que insights de cada tradi√ß√£o mant√©m?

**O que sacrifica**: Que tens√µes "resolve" descartando um dos lados? Que perspectiva fica subalterna?

**Pressupostos necess√°rios**: Que voc√™ precisa aceitar para essa s√≠ntese funcionar?

**Evid√™ncias nas fontes**: Alguma fonte sugere (mesmo implicitamente) essa dire√ß√£o?

**Quem ganha, quem perde**: Que tradi√ß√£o intelectual sairia fortalecida por essa s√≠ntese?

**PASSO 2: S√çNTESE DAS S√çNTESES**
- Qual rota √© mais fiel √†s fontes como est√£o?
- Qual requer mais reinterpreta√ß√£o criativa?
- Existe rota que nenhuma fonte sugere mas que seria intelectualmente coerente?
- Existe tens√£o que NENHUMA rota resolve ‚Äî que precisa ser mantida como tens√£o produtiva?

**PASSO 3: RECOMENDA√á√ÉO FUNDAMENTADA**
Com base na an√°lise, que rota(s) de s√≠ntese fazem mais sentido para os objetivos do usu√°rio ‚Äî e por qu√™? Explicite que essa recomenda√ß√£o √© INTERPRETA√á√ÉO, n√£o leitura direta das fontes.`,

            tensionamento: `\n\n**ORIENTA√á√ïES ESPEC√çFICAS PARA TENSIONAMENTO PRODUTIVO**:

O objetivo n√£o √© resolver o conflito entre fontes de tradi√ß√µes distintas ‚Äî √© usar o conflito para revelar o que cada tradi√ß√£o deixa invis√≠vel.

**1. SELE√á√ÉO DE PARES PRODUTIVOS**
Identifique 2-3 pares de fontes de tradi√ß√µes diferentes que, em confronto direto, gerariam m√°xima fric√ß√£o epist√™mica. Para cada par selecionado, justifique: por que ESSE par √© especialmente produtivo?

**2. PROTOCOLO DE CONFRONTO**
Para cada par de fontes (Fonte A √ó Fonte B):

**O que A diria sobre B**:
- Que pressuposto central de B seria inaceit√°vel para A?
- Que pergunta A faria que B n√£o consegue responder com suas pr√≥prias ferramentas?
- Que evid√™ncia A apresentaria que B teria dificuldade de absorver?

**O que B diria sobre A**:
- Que aspecto do problema A est√° estruturalmente cego para ver?
- Que B explicaria que A descarta como irrelevante ou n√£o-cient√≠fico?
- Que limita√ß√£o de A B revelaria?

**O que o confronto ilumina**:
- Que aspecto do problema central s√≥ fica VIS√çVEL por causa do confronto?
- Que quest√£o nenhuma das duas fontes consegue fazer sozinha, mas o confronto entre elas torna formul√°vel?

**3. FRIC√á√ïES DE ALTO RENDIMENTO**
Identifique os pontos de conflito mais produtivos ‚Äî onde a diverg√™ncia n√£o √© erro, mas revela estrutura profunda do problema. Que cada fric√ß√£o ensina sobre os limites de cada tradi√ß√£o?

**4. QUEST√ïES EMERGENTES**
Liste 5-8 quest√µes que S√ì emergem do tensionamento ‚Äî que nenhuma fonte individual formularia. Essas s√£o as quest√µes que um projeto genuinamente interdisciplinar precisaria endere√ßar.

**5. REFLEX√ÉO METODOL√ìGICA**
O que esse exerc√≠cio de tensionamento sugere sobre como conduzir pesquisa que usa essas fontes? Que postura epist√™mica o pesquisador precisaria adotar?`
        };

        const BASE_PROMPT = `Analise as fontes fornecidas e produza um relat√≥rio customizado do tipo: **{TIPO}**

**ESTRUTURA ANAL√çTICA**: Organize o relat√≥rio em se√ß√µes funcionais adequadas ao objetivo especificado, priorizando elementos com maior relev√¢ncia para o tipo de an√°lise solicitada.

**COMPONENTES INVESTIGATIVOS**: Para cada se√ß√£o, implemente estrat√©gias anal√≠ticas apropriadas:
- Extra√ß√£o conceitual com preserva√ß√£o terminol√≥gica quando necess√°rio
- Mapeamento argumentativo identificando estrutura l√≥gica e evidencial
- Identifica√ß√£o de filia√ß√µes epistemol√≥gicas e metodol√≥gicas
- Sistematiza√ß√£o de intersec√ß√µes disciplinares e di√°logos te√≥ricos
- Problematiza√ß√£o de tens√µes internas e pontos cegos metodol√≥gicos

**MODALIDADES DE SA√çDA**: Calibre o formato conforme fun√ß√£o pretendida:
- Para consulta: √™nfase em s√≠ntese, cita√ß√µes localizadas e referenciamento
- Para projeto: foco em aplicabilidade, transferibilidade conceitual e agenda investigativa
- Para ensaio: prioridade a problematiza√ß√µes e experimentos conceituais
- Para estudo: mapeamento exaustivo e desenvolvimento argumentativo

**RIGOR METODOL√ìGICO**: Mantenha precis√£o factual, economia textual e adequa√ß√£o ao n√≠vel de p√≥s-gradua√ß√£o. Preserve complexidade conceitual necess√°ria.

**QUEST√ïES ORIENTADORAS**: Formule quest√µes anal√≠ticas que: exijam articula√ß√£o de m√∫ltiplos aspectos; demandem posicionamento te√≥rico fundamentado; estimulem an√°lise cr√≠tica de pressupostos; impossibilitem resposta sint√©tica ou bin√°ria.

**CONECTIVIDADE ACAD√äMICA**: Identifique articula√ß√µes com outros campos, tradi√ß√µes te√≥ricas correlatas e agenda de pesquisa contempor√¢nea.`;

        function generatePrompt() {
            const reportType = document.getElementById('reportType').value.trim();
            const customFocus = document.getElementById('customFocus').value.trim();
            if (!reportType) { alert('Por favor, especifique o tipo de relat√≥rio desejado.'); return; }

            let prompt = BASE_PROMPT.replace('{TIPO}', reportType);

            if (activeTemplate && specificInstructions[activeTemplate]) {
                prompt += specificInstructions[activeTemplate];
            }

            if (customFocus) prompt += `\n\n**FOCO ESPEC√çFICO**: ${customFocus}`;

            if (guardrailOn) prompt += GUARDRAIL;

            prompt += `\n\nAdapte automaticamente profundidade anal√≠tica, √™nfases conceituais e modalidade de apresenta√ß√£o conforme especifica√ß√µes do relat√≥rio solicitado.`;

            document.getElementById('promptOutput').textContent = prompt;
            const len = prompt.length;
            const cc = document.getElementById('charCount');
            cc.innerHTML = len > 5000
                ? `<span class="warning">‚ö†Ô∏è ${len} caracteres ‚Äî excede limite NotebookLM (5000). Considere desativar o Modo Rigoroso ou usar foco espec√≠fico menor.</span>`
                : `${len} caracteres (limite NotebookLM: 5000)`;
            document.getElementById('outputSection').style.display = 'block';
            document.getElementById('outputSection').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function copyToClipboard() {
            navigator.clipboard.writeText(document.getElementById('promptOutput').textContent).then(() => {
                const btn = document.querySelector('.copy-btn');
                btn.classList.add('copied');
                document.getElementById('copyIcon').textContent = '‚úì';
                document.getElementById('copyText').textContent = 'Copiado!';
                setTimeout(() => {
                    btn.classList.remove('copied');
                    document.getElementById('copyIcon').textContent = 'üìã';
                    document.getElementById('copyText').textContent = 'Copiar';
                }, 2000);
            }).catch(() => alert('Erro ao copiar. Selecione e copie manualmente.'));
        }
    </script>
</body>

</html>