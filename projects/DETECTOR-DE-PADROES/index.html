<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detector de Padr√µes em Corpus</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Google Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f0f4ff;
            min-height: 100vh;
            color: #202124;
            padding: 2rem 1rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            font-size: 1.75rem;
            font-weight: 600;
            color: #1a1f36;
            letter-spacing: -0.5px;
            margin-bottom: 0.4rem;
        }

        .header .sub {
            font-size: 0.9rem;
            color: #5f6368;
            max-width: 560px;
            margin: 0 auto;
        }

        .header .flow {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.75rem;
            font-size: 0.8rem;
            color: #5f6368;
            background: white;
            padding: 0.4rem 0.9rem;
            border-radius: 20px;
            border: 1px solid #e0e0e0;
        }

        .header .flow strong {
            color: #1a73e8;
        }

        .card {
            background: white;
            border-radius: 14px;
            padding: 1.75rem;
            box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
            margin-bottom: 1.25rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-size: 0.875rem;
            color: #3c4043;
        }

        textarea,
        input {
            width: 100%;
            padding: 0.7rem 0.85rem;
            border: 1px solid #dadce0;
            border-radius: 8px;
            font-size: 0.9rem;
            font-family: inherit;
            transition: border-color 0.2s, box-shadow 0.2s;
            background: #fff;
            resize: vertical;
        }

        textarea:focus,
        input:focus {
            outline: none;
            border-color: #1a73e8;
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
        }

        textarea::placeholder,
        input::placeholder {
            color: #9aa0a6;
        }

        .section-title {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            color: #5f6368;
            margin-bottom: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-title::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #e8eaed;
        }

        /* Heur√≠stica grid */
        .heuristica-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 0.6rem;
        }

        .h-btn {
            border: 1.5px solid #e0e0e0;
            border-radius: 10px;
            padding: 0.75rem 0.85rem;
            cursor: pointer;
            transition: all 0.18s ease;
            background: #fafafa;
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }

        .h-btn:hover {
            border-color: #1a73e8;
            background: #f0f6ff;
            transform: translateY(-1px);
        }

        .h-btn.active {
            border-color: #1a73e8;
            background: linear-gradient(135deg, #e8f0fe, #d2e3fc);
            box-shadow: 0 2px 8px rgba(26, 115, 232, 0.15);
        }

        .h-btn .ico {
            font-size: 1.3rem;
        }

        .h-btn .nome {
            font-size: 0.82rem;
            font-weight: 600;
            color: #202124;
            line-height: 1.3;
        }

        .h-btn .desc {
            font-size: 0.73rem;
            color: #5f6368;
            line-height: 1.35;
        }

        .h-btn.active .nome {
            color: #1967d2;
        }

        .h-btn.active .desc {
            color: #4285f4;
        }

        /* Intensidade */
        .intensity-row {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.25rem;
        }

        .int-btn {
            flex: 1;
            padding: 0.55rem;
            border: 1.5px solid #e0e0e0;
            border-radius: 7px;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            text-align: center;
            background: #fafafa;
            transition: all 0.15s;
            color: #5f6368;
        }

        .int-btn:hover {
            border-color: #1a73e8;
            color: #1a73e8;
        }

        .int-btn.active {
            border-color: #1a73e8;
            background: #e8f0fe;
            color: #1967d2;
            font-weight: 600;
        }

        /* Toggle guardrail */
        .toggle-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.8rem 1rem;
            border: 1.5px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }

        .toggle-row:hover {
            border-color: #1a73e8;
            background: #f0f6ff;
        }

        .toggle-row.on {
            border-color: #e53935;
            background: #fff8f7;
        }

        .toggle-sw {
            width: 34px;
            height: 19px;
            border-radius: 10px;
            background: #ccc;
            position: relative;
            flex-shrink: 0;
            transition: background 0.2s;
        }

        .toggle-sw.on {
            background: #e53935;
        }

        .toggle-knob {
            position: absolute;
            top: 2.5px;
            left: 2.5px;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: white;
            transition: left 0.2s;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);
        }

        .toggle-sw.on .toggle-knob {
            left: 18px;
        }

        .toggle-label {
            font-size: 0.85rem;
            font-weight: 500;
            color: #3c4043;
        }

        .toggle-desc {
            font-size: 0.78rem;
            color: #80868b;
            margin-left: auto;
        }

        .gen-btn {
            width: 100%;
            padding: 0.9rem;
            background: #1a73e8;
            color: white;
            border: none;
            border-radius: 9px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            letter-spacing: 0.2px;
            box-shadow: 0 1px 3px rgba(26, 115, 232, 0.3);
        }

        .gen-btn:hover {
            background: #1557b0;
            box-shadow: 0 3px 10px rgba(26, 115, 232, 0.35);
        }

        .gen-btn:active {
            background: #0d47a1;
        }

        /* Output */
        .output-card {
            background: white;
            border-radius: 14px;
            box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
        }

        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.25rem 1.75rem 0;
        }

        .output-header h3 {
            font-size: 1rem;
            font-weight: 600;
            color: #202124;
        }

        .copy-btn {
            background: #1a73e8;
            color: white;
            border: none;
            padding: 0.5rem 1.1rem;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: #1557b0;
        }

        .copy-btn.ok {
            background: #1e8e3e;
        }

        .output-box {
            padding: 1.25rem 1.75rem;
            font-family: 'Roboto Mono', 'Consolas', monospace;
            font-size: 0.8rem;
            line-height: 1.7;
            white-space: pre-wrap;
            max-height: 540px;
            overflow-y: auto;
            color: #202124;
            border-top: 1px solid #f1f3f4;
            margin-top: 1rem;
        }

        .char-bar {
            padding: 0.6rem 1.75rem 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .char-bar-inner {
            flex: 1;
            height: 5px;
            background: #e8eaed;
            border-radius: 3px;
            overflow: hidden;
        }

        .char-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.4s, background 0.4s;
        }

        .char-label {
            font-size: 0.78rem;
            color: #5f6368;
            white-space: nowrap;
        }

        .char-label.over {
            color: #e53935;
            font-weight: 600;
        }

        @media(max-width:640px) {
            .heuristica-grid {
                grid-template-columns: 1fr 1fr;
            }

            .header h1 {
                font-size: 1.4rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">

        <div class="header">
            <h1>üîç Detector de Padr√µes em Corpus</h1>
            <p class="sub">Gera prompts para o NotebookLM identificar padr√µes transversais em m√∫ltiplas fontes
                heterog√™neas</p>
            <div class="flow">
                <span>Voc√™</span> <span>‚Üí</span> <strong>este gerador</strong> <span>‚Üí</span> <span>prompt</span>
                <span>‚Üí</span> <strong>NotebookLM</strong> <span>‚Üí</span> <span>fontes</span>
            </div>
        </div>

        <!-- CORPUS -->
        <div class="card">
            <div class="section-title">1. Descreva seu corpus</div>
            <div style="margin-bottom:1rem;">
                <label for="corpusDesc">Que tipos de fontes est√£o no seu notebook? <span
                        style="color:#9aa0a6;font-weight:400;">(opcional mas recomendado)</span></label>
                <textarea id="corpusDesc" rows="2"
                    placeholder="Ex: papers t√©cnicos de ML, textos de sociologia da tecnologia e ensaios de filosofia da mente ‚Äî todos sobre ag√™ncia em sistemas aut√¥nomos."></textarea>
            </div>
            <div>
                <label for="focalConcept">Conceito ou tema focal <span
                        style="color:#9aa0a6;font-weight:400;">(opcional)</span></label>
                <input type="text" id="focalConcept"
                    placeholder="Ex: aprendizado supervisionado, ag√™ncia, vi√©s algor√≠tmico...">
            </div>
        </div>

        <!-- HEUR√çSTICA -->
        <div class="card">
            <div class="section-title">2. Escolha a heur√≠stica de padr√£o</div>
            <div class="heuristica-grid" id="hGrid">

                <div class="h-btn" onclick="selH('convergencia',this)">
                    <span class="ico">‚ÜîÔ∏è</span>
                    <span class="nome">Converg√™ncia Tem√°tica</span>
                    <span class="desc">Temas que emergem em todas ou na maioria das fontes, independente da
                        tradi√ß√£o</span>
                </div>

                <div class="h-btn" onclick="selH('divergencia',this)">
                    <span class="ico">‚ö°</span>
                    <span class="nome">Diverg√™ncia Estrutural</span>
                    <span class="desc">Onde fontes discordam ao n√≠vel de premissas ‚Äî irredut√≠vel por mais dados</span>
                </div>

                <div class="h-btn" onclick="selH('silencios',this)">
                    <span class="ico">üîá</span>
                    <span class="nome">Sil√™ncios Partilhados</span>
                    <span class="desc">O que nenhuma fonte no corpus aborda ‚Äî pontos cegos coletivos</span>
                </div>

                <div class="h-btn" onclick="selH('friccao',this)">
                    <span class="ico">üîÄ</span>
                    <span class="nome">Fric√ß√£o Terminol√≥gica</span>
                    <span class="desc">Mesma palavra, fen√¥menos diferentes ‚Äî e palavras diferentes para o mesmo
                        fen√¥meno</span>
                </div>

                <div class="h-btn" onclick="selH('clusters',this)">
                    <span class="ico">üß©</span>
                    <span class="nome">Clusters de Pressuposto</span>
                    <span class="desc">Fontes que partilham premissas profundas apesar de diferen√ßas superficiais</span>
                </div>

                <div class="h-btn" onclick="selH('saturacao',this)">
                    <span class="ico">üìä</span>
                    <span class="nome">Satura√ß√£o Tem√°tica</span>
                    <span class="desc">Temas exaustivos vs. underdeveloped ‚Äî onde o corpus est√° denso vs.
                        rarefeito</span>
                </div>

                <div class="h-btn" onclick="selH('assimetria',this)">
                    <span class="ico">‚öñÔ∏è</span>
                    <span class="nome">Assimetria de Aten√ß√£o</span>
                    <span class="desc">O que umas fontes tratam como central e outras como perif√©rico ou
                        irrelevante</span>
                </div>

                <div class="h-btn" onclick="selH('evolucao',this)">
                    <span class="ico">üìà</span>
                    <span class="nome">Evolu√ß√£o Conceitual</span>
                    <span class="desc">Como um conceito se transforma, migra ou se deforma ao longo das fontes</span>
                </div>

                <div class="h-btn" onclick="selH('exclusao',this)">
                    <span class="ico">üö´</span>
                    <span class="nome">Padr√µes de Exclus√£o</span>
                    <span class="desc">O que √© sistematicamente marginalizado, descartado ou tornado impens√°vel</span>
                </div>

                <div class="h-btn" onclick="selH('hierarquia',this)">
                    <span class="ico">üèõÔ∏è</span>
                    <span class="nome">Hierarquia Conceitual</span>
                    <span class="desc">Quais conceitos funcionam como √¢ncoras que estruturam os demais no corpus</span>
                </div>

            </div>
        </div>

        <!-- INTENSIDADE + GUARDRAIL -->
        <div class="card">
            <div class="section-title">3. Configura√ß√µes do prompt</div>

            <div style="margin-bottom:1.1rem;">
                <label style="margin-bottom:0.6rem;">Profundidade anal√≠tica</label>
                <div class="intensity-row">
                    <div class="int-btn active" id="int-rapido" onclick="selInt('rapido')">‚ö° R√°pido<br><span
                            style="font-weight:400;font-size:0.72rem;">Mapa inicial</span></div>
                    <div class="int-btn" id="int-medio" onclick="selInt('medio')">üî¨ Padr√£o<br><span
                            style="font-weight:400;font-size:0.72rem;">An√°lise completa</span></div>
                    <div class="int-btn" id="int-exaustivo" onclick="selInt('exaustivo')">üß† Exaustivo<br><span
                            style="font-weight:400;font-size:0.72rem;">Arqueologia total</span></div>
                </div>
            </div>

            <div class="toggle-row" id="grToggle" onclick="toggleGR()">
                <div class="toggle-sw" id="grSw">
                    <div class="toggle-knob"></div>
                </div>
                <span class="toggle-label">üõ°Ô∏è Guardrail epist√™mico</span>
                <span class="toggle-desc" id="grDesc">Injeta regras anti-alucina√ß√£o no prompt</span>
            </div>
        </div>

        <button class="gen-btn" onclick="generate()">üöÄ Gerar Prompt para NotebookLM</button>

        <div style="margin-top:1.25rem;" id="outputWrap" style="display:none;">
            <div class="output-card" id="outputCard">
                <div class="output-header">
                    <h3 id="outputTitle">Prompt Gerado</h3>
                    <button class="copy-btn" id="copyBtn" onclick="doCopy()">üìã Copiar</button>
                </div>
                <div class="output-box" id="outputBox"></div>
                <div class="char-bar">
                    <div class="char-bar-inner">
                        <div class="char-fill" id="charFill"></div>
                    </div>
                    <span class="char-label" id="charLabel"></span>
                </div>
            </div>
        </div>

    </div><!-- /container -->
    <script>
        let activeH = null;
        let activeInt = 'rapido';
        let grOn = false;

        function selH(k, el) {
            document.querySelectorAll('.h-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            activeH = k;
        }

        function selInt(k) {
            ['rapido', 'medio', 'exaustivo'].forEach(i => document.getElementById('int-' + i).classList.remove('active'));
            document.getElementById('int-' + k).classList.add('active');
            activeInt = k;
        }

        function toggleGR() {
            grOn = !grOn;
            document.getElementById('grSw').classList.toggle('on', grOn);
            document.getElementById('grToggle').classList.toggle('on', grOn);
            document.getElementById('grDesc').textContent = grOn
                ? 'Ativo ‚Äî diretrizes anti-alucina√ß√£o inclu√≠das'
                : 'Injeta regras anti-alucina√ß√£o no prompt';
        }

        // ‚îÄ‚îÄ‚îÄ GUARDRAIL CONDENSADO ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        const GR = `
**GUARDRAILS EPIST√äMICOS**:
‚Ä¢ Cada afirma√ß√£o sobre padr√µes = cita√ß√£o inline [n] na mesma frase.
‚Ä¢ Mapeie o que CADA fonte diz separadamente ANTES de qualquer s√≠ntese cross-fonte.
‚Ä¢ Distinga: converg√™ncia genu√≠na (mesmo fen√¥meno) vs. converg√™ncia aparente (mesma palavra, significados distintos).
‚Ä¢ Diverg√™ncias: exponha sem harmonizar. Se as premissas s√£o incompat√≠veis, diga isso.
‚Ä¢ Sil√™ncios e aus√™ncias: declare explicitamente ‚Äî n√£o inferir o que as fontes n√£o dizem.
‚Ä¢ S√≠nteses marcadas como interpreta√ß√£o sua, n√£o como o que as fontes afirmam diretamente.
‚Ä¢ Lembre o usu√°rio de verificar cita√ß√µes clicando nos [n√∫meros].`;

        // ‚îÄ‚îÄ‚îÄ BLOCOS BASE POR HEUR√çSTICA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        const H = {

            convergencia: {
                nome: 'Converg√™ncia Tem√°tica',
                base: (corpus, focal, prof) => `Fa√ßa uma an√°lise de CONVERG√äNCIA TEM√ÅTICA em todas as fontes deste notebook.${corpus ? `\n\nCORPUS: ${corpus}` : ''}${focal ? `\nFOCO CONCEITUAL: ${focal}` : ''}

**OBJETIVO**: Identificar temas, argumentos ou conclus√µes que emergem em m√∫ltiplas fontes de forma independente ‚Äî especialmente quando essas fontes v√™m de tradi√ß√µes intelectuais distintas.

**ETAPA 1 ‚Äî INVENT√ÅRIO POR FONTE**
Para cada fonte, liste os 3-5 temas/argumentos centrais que ela desenvolve. Seja espec√≠fico: n√£o "fala sobre X", mas "argumenta que X porque Y". Cite [n] inline.

**ETAPA 2 ‚Äî MAPEAMENTO DE RECORR√äNCIAS**
Identifique temas que aparecem em 2 ou mais fontes. Para cada recorr√™ncia:
- Quais fontes a compartilham [n]
- Como cada uma formula o tema (use as palavras de cada fonte, n√£o as suas)
- ${prof === 'rapido' ? 'Classifica√ß√£o preliminar: converg√™ncia genu√≠na ou aparente?' : prof === 'medio' ? 'Classifica√ß√£o: **genu√≠na** (mesmo fen√¥meno, abordagens independentes) ou **aparente** (mesma palavra, premissas diferentes)? Argumento para a classifica√ß√£o.' : 'Classifica√ß√£o rigorosa: **genu√≠na** / **aparente** / **incerta**. Para genu√≠nas: que fortaleza epist√™mica isso confere? Para aparentes: onde exatamente a superf√≠cie engana?'}

**ETAPA 3 ‚Äî PADR√ÉO EMERGENTE**
${prof === 'rapido' ? 'Qual tema √© mais amplamente compartilhado? Que isso sugere sobre o campo?' : prof === 'medio' ? 'Quais converg√™ncias genu√≠nas s√£o mais significativas? O que revelam sobre consensos (expl√≠citos ou impl√≠citos) no campo? Que converg√™ncias aparentes s√£o mais armadilhas para um leitor interdisciplinar?' : 'An√°lise em tr√™s n√≠veis:\n(a) Converg√™ncias de superf√≠cie: vocabul√°rio compartilhado\n(b) Converg√™ncias estruturais: mesma l√≥gica argumentativa, terminologias distintas\n(c) Converg√™ncias de pressuposto: mesmas premissas fundantes, sem que as fontes se citem\nPara cada n√≠vel: exemplos espec√≠ficos com cita√ß√µes.'}

${prof === 'exaustivo' ? '\n**ETAPA 4 ‚Äî AN√ÅLISE DE ROBUSTEZ**\nQuais converg√™ncias sobreviveriam a: (a) inclus√£o de fontes de tradi√ß√µes ausentes neste corpus? (b) um cr√≠tico que argumente que s√£o converg√™ncias aparentes? Sinalize as converg√™ncias mais fr√°geis.' : ''}`,
            },

            divergencia: {
                nome: 'Diverg√™ncia Estrutural',
                base: (corpus, focal, prof) => `Fa√ßa uma an√°lise de DIVERG√äNCIA ESTRUTURAL em todas as fontes deste notebook.${corpus ? `\n\nCORPUS: ${corpus}` : ''}${focal ? `\nFOCO CONCEITUAL: ${focal}` : ''}

**OBJETIVO**: Identificar onde as fontes discordam ao n√≠vel de premissas, n√£o apenas de dados ou m√©todos. Diverg√™ncias estruturais s√£o irredut√≠veis: mais evid√™ncia emp√≠rica n√£o as resolve.

**ETAPA 1 ‚Äî IDENTIFICA√á√ÉO DE TESES**
Para cada fonte, extraia 2-3 teses centrais formuladas com precis√£o. Distingua: tese ontol√≥gica (o que existe), epistemol√≥gica (como conhecemos), metodol√≥gica (como investigamos), normativa (o que importa). Cite [n].

**ETAPA 2 ‚Äî MAPEAMENTO DE CONFLITOS**
Para cada par ou conjunto de fontes em conflito:
- Ponto exato de diverg√™ncia (formula√ß√£o precisa, n√£o vaga)
- Tipo do conflito: premissas? dados? valores? m√©todo? defini√ß√£o?
- ${prof === 'rapido' ? 'Irredut√≠vel ou resol√∫vel? (uma linha)' : prof === 'medio' ? '**Irredut√≠vel**: desacordo de premissas ‚Äî nenhuma evid√™ncia adicional resolve. **Resol√∫vel**: desacordo emp√≠rico, terminol√≥gico ou de escopo ‚Äî especifique o que mediaria.' : '**Irredut√≠vel**: qual √© o n√∫cleo exato do desacordo? Que pressuposto cada lado recusa ceder? **Resol√∫vel**: que informa√ß√£o, experimento conceitual ou clarifica√ß√£o terminol√≥gica mediaria? **Diagn√≥stico**: √© diverg√™ncia real ou artefato de tradi√ß√µes disciplinares diferentes usando palavras diferentes?'}
- Cite as passagens espec√≠ficas que evidenciam o conflito [n]

${prof !== 'rapido' ? `**ETAPA 3 ‚Äî ANATOMIA DAS DIVERG√äNCIAS IRREDUT√çVEIS**
Para cada diverg√™ncia marcada como irredut√≠vel:
- Que cada lado V√ä que o outro n√£o v√™ (n√£o que um esteja errado ‚Äî que cada um ilumina)
- Que quest√µes o campo precisaria enfrentar para fazer progresso apesar do desacordo
- Se existe terceira posi√ß√£o que o corpus n√£o representa, mas que seria logicamente poss√≠vel` : ''}

${prof === 'exaustivo' ? `\n**ETAPA 4 ‚Äî IMPLICA√á√ïES PARA PESQUISA INTERDISCIPLINAR**
Um pesquisador trabalhando com todas essas fontes ao mesmo tempo: que conflitos precisaria declarar explicitamente em vez de tentar harmonizar? Que escolhas de premissa precisaria fazer antes de avan√ßar?` : ''}`,
            },

            silencios: {
                nome: 'Sil√™ncios Partilhados',
                base: (corpus, focal, prof) => `Fa√ßa uma an√°lise de SIL√äNCIOS PARTILHADOS em todas as fontes deste notebook.${corpus ? `\n\nCORPUS: ${corpus}` : ''}${focal ? `\nFOCO CONCEITUAL: ${focal}` : ''}

**OBJETIVO**: Identificar o que nenhuma fonte aborda ‚Äî n√£o por acaso, mas por exclus√£o estrutural. Sil√™ncios partilhados revelam os limites coletivos do que um corpus consegue pensar.

**ETAPA 1 ‚Äî PER√çMETRO DO CORPUS**
Mapeie o que o corpus COBRE: temas presentes, perspectivas representadas, tipos de evid√™ncia mobilizados, vozes citadas. Seja espec√≠fico ‚Äî isso define a borda a partir da qual os sil√™ncios se tornam vis√≠veis. Cite [n] para cada elemento.

**ETAPA 2 ‚Äî IDENTIFICA√á√ÉO DE SIL√äNCIOS**
${prof === 'rapido' ? 'Liste 4-6 temas, perspectivas ou quest√µes que NENHUMA fonte aborda, organizados por tipo: (a) aus√™ncias tem√°ticas, (b) vozes/perspectivas ausentes, (c) quest√µes que o corpus n√£o consegue formular.' : `Identifique sil√™ncios em quatro categorias:

(a) **Aus√™ncias tem√°ticas**: t√≥picos relevantes ao dom√≠nio que nenhuma fonte toca
(b) **Perspectivas ausentes**: tradi√ß√µes intelectuais, grupos, geografias n√£o representados
(c) **Quest√µes informul√°veis**: perguntas que os pressupostos do corpus tornam impens√°veis
(d) **Evid√™ncias descartadas**: tipos de dado ou argumento que o corpus sistematicamente ignora

Para cada sil√™ncio: por que √© significativo? Que distor√ß√£o a aus√™ncia introduz na an√°lise?`}

${prof === 'exaustivo' ? `
**ETAPA 3 ‚Äî ARQUEOLOGIA DOS SIL√äNCIOS**
Para os 3-4 sil√™ncios mais significativos: por que esse sil√™ncio existe? √â efeito de:
- Tradi√ß√£o disciplinar (o campo n√£o desenvolveu ferramentas para isso)?
- Vi√©s de sele√ß√£o de fontes (poderia ser corrigido com outras fontes)?
- Ponto cego estrutural (nenhuma fonte desse tipo conseguiria abordar)?
- Consenso impl√≠cito (o campo descartou isso, talvez equivocadamente)?

**ETAPA 4 ‚Äî IMPLICA√á√ïES**
Que conclus√µes do corpus seriam diferentes se os sil√™ncios fossem preenchidos? Que perguntas de pesquisa os sil√™ncios sugerem?` : prof === 'medio' ? `
**ETAPA 3 ‚Äî SIGNIFIC√ÇNCIA**
Quais s√£o os 2-3 sil√™ncios mais consequentes ‚Äî cuja aus√™ncia mais distorce o que √© poss√≠vel concluir a partir deste corpus? Por qu√™?` : ''}`,
            },

            friccao: {
                nome: 'Fric√ß√£o Terminol√≥gica',
                base: (corpus, focal, prof) => `Fa√ßa uma an√°lise de FRIC√á√ÉO TERMINOL√ìGICA em todas as fontes deste notebook.${corpus ? `\n\nCORPUS: ${corpus}` : ''}${focal ? `\nFOCO CONCEITUAL: ${focal}` : ''}

**OBJETIVO**: Mapear dois fen√¥menos complementares: (1) mesma palavra usada com significados distintos por fontes diferentes; (2) palavras distintas usadas para o mesmo fen√¥meno. Ambos geram mal-entendidos invis√≠veis em leitura interdisciplinar.

**ETAPA 1 ‚Äî INVENT√ÅRIO TERMINOL√ìGICO**
Liste os 10-15 termos t√©cnicos mais frequentes ou centrais no corpus. Para cada um: quais fontes o usam [n].

**ETAPA 2 ‚Äî FALSOS COGNATOS** (mesma palavra, fen√¥menos distintos)
Para cada falso cognato identificado:
- Palavra compartilhada
- Defini√ß√£o/uso em Fonte A [n] vs. Fonte B [n] ‚Äî use as palavras das fontes
- Em que exatamente divergem: extens√£o do conceito? pressupostos embutidos? teoria de fundo?
- Que confus√£o concreta isso geraria num leitor que n√£o percebe a diferen√ßa?
${prof !== 'rapido' ? '- Proposta de desambigua√ß√£o: termos que poderiam substituir cada uso?' : ''}

**ETAPA 3 ‚Äî COGNATOS GENU√çNOS** (palavras distintas, mesmo fen√¥meno)
Para cada par/grupo identificado:
- Termos em cada tradi√ß√£o [n]
- Argumento de que se referem ao mesmo fen√¥meno
${prof !== 'rapido' ? '- O que cada terminologia captura que a outra n√£o? (Pode haver raz√£o para manter ambas)\n- Tradu√ß√£o poss√≠vel: qual termo seria mais preciso para um leitor interdisciplinar?' : ''}

${prof === 'exaustivo' ? `
**ETAPA 4 ‚Äî MAPA DE FRIC√á√ïES**
Produza uma tabela consolidada:

| Fen√¥meno/Conceito | Tradi√ß√£o A | Tradi√ß√£o B | Tipo (falso/genu√≠no) | Risco de confus√£o |
|-------------------|-----------|-----------|---------------------|------------------|

**ETAPA 5 ‚Äî IMPLICA√á√ïES**
Que mal-entendidos entre tradi√ß√µes s√£o mais prov√°veis dado esse mapa? Onde um pesquisador precisaria de nota expl√≠cita de tradu√ß√£o terminol√≥gica?` : ''}`,
            },

            clusters: {
                nome: 'Clusters de Pressuposto',
                base: (corpus, focal, prof) => `Fa√ßa uma an√°lise de CLUSTERS DE PRESSUPOSTO em todas as fontes deste notebook.${corpus ? `\n\nCORPUS: ${corpus}` : ''}${focal ? `\nFOCO CONCEITUAL: ${focal}` : ''}

**OBJETIVO**: Identificar quais fontes compartilham premissas profundas ‚Äî mesmo que se oponham na superf√≠cie, mesmo que venham de disciplinas diferentes. Fontes no mesmo cluster "habitam o mesmo mundo" epistemicamente.

**ETAPA 1 ‚Äî ARQUEOLOGIA DE PRESSUPOSTOS**
Para cada fonte, identifique 3-4 pressupostos que ela n√£o argumenta, mas assume:
- Ontol√≥gicos: que tipo de entidades existem e s√£o relevantes?
- Epistemol√≥gicos: o que conta como evid√™ncia v√°lida? Quem pode produzir conhecimento?
- Metodol√≥gicos: que abordagens s√£o leg√≠timas?
- Normativos: que valores estruturam o que √© visto como problema?
Cite [n] passagens que REVELAM (sem enunciar) esses pressupostos.

**ETAPA 2 ‚Äî AGRUPAMENTO**
${prof === 'rapido' ? 'Agrupe as fontes em 2-4 clusters com base em pressupostos compartilhados. Para cada cluster: que premissa central une as fontes? Que fontes pertencem a mais de um cluster?' : `Agrupe as fontes em clusters. Para cada cluster:
- Nome descritivo (n√£o disciplinar ‚Äî descreva o pressuposto, n√£o a √°rea)
- Fontes membros [n]
- Pressuposto central compartilhado (formulado com precis√£o)
- Por que fontes aparentemente distintas est√£o no mesmo cluster?
- Que fontes s√£o casos-limite ou pertencem parcialmente a dois clusters?`}

${prof !== 'rapido' ? `
**ETAPA 3 ‚Äî ENTRE CLUSTERS**
- Que pressuposto separa mais radicalmente os clusters identificados?
- Existe fonte que desafia os pressupostos de seu pr√≥prio cluster?
- Que cluster est√° mais representado no corpus? Que vi√©s isso introduz?` : ''}

${prof === 'exaustivo' ? `
**ETAPA 4 ‚Äî IMPLICA√á√ïES PARA S√çNTESE**
Uma s√≠ntese entre fontes de clusters diferentes requer: aceitar pressupostos incompat√≠veis? escolher um conjunto de premissas como base? criar nova ontologia? Mapeie as op√ß√µes e seus custos.` : ''}`,
            },

            saturacao: {
                nome: 'Satura√ß√£o Tem√°tica',
                base: (corpus, focal, prof) => `Fa√ßa uma an√°lise de SATURA√á√ÉO TEM√ÅTICA em todas as fontes deste notebook.${corpus ? `\n\nCORPUS: ${corpus}` : ''}${focal ? `\nFOCO CONCEITUAL: ${focal}` : ''}

**OBJETIVO**: Mapear a densidade do corpus ‚Äî onde h√° excesso de aten√ß√£o, onde h√° desenvolvimento insuficiente, e o que isso revela sobre o estado do campo.

**ETAPA 1 ‚Äî INVENT√ÅRIO TEM√ÅTICO**
Liste todos os temas/subtemas abordados no corpus. Para cada um: quais fontes o abordam [n] e com que profundidade (central / tangencial / mencionado).

**ETAPA 2 ‚Äî MAPA DE DENSIDADE**
${prof === 'rapido' ? 'Identifique: (a) 3-4 temas supersaturados ‚Äî muitas fontes, pouca novidade adicional; (b) 3-4 temas rarefeitos ‚Äî importantes mas subdesenvolvidos. Uma frase de justificativa para cada.' : `Classifique cada tema em:
- **Supersaturado**: muitas fontes, argumentos repetitivos ‚Äî o corpus n√£o avan√ßa mais aqui
- **Bem desenvolvido**: cobertura equilibrada, m√∫ltiplas perspectivas
- **Rarefeito**: presente mas insuficientemente desenvolvido
- **Ausente-esperado**: dado o dom√≠nio, deveria estar aqui mas n√£o est√°

Para supersaturados: o que as fontes adicionais ainda acrescentam, se algo?
Para rarefeitos: que fontes externas complementariam melhor?`}

${prof !== 'rapido' ? `
**ETAPA 3 ‚Äî AN√ÅLISE DE PADR√ÉO**
A distribui√ß√£o de densidade √©: acidental (sele√ß√£o de fontes)? estrutural (o campo mesmo est√° assim)? ou intencional (o corpus foi montado com determinado vi√©s)?

Que temas rarefeitos t√™m maior potencial de desenvolvimento para pesquisa original?` : ''}

${prof === 'exaustivo' ? `
**ETAPA 4 ‚Äî AGENDA DERIVADA**
Com base na an√°lise de satura√ß√£o: que 3-5 quest√µes de pesquisa teriam maior retorno epist√™mico ‚Äî por explorar zonas rarefeitas onde o corpus deixou espa√ßo aberto?` : ''}`,
            },

            assimetria: {
                nome: 'Assimetria de Aten√ß√£o',
                base: (corpus, focal, prof) => `Fa√ßa uma an√°lise de ASSIMETRIA DE ATEN√á√ÉO em todas as fontes deste notebook.${corpus ? `\n\nCORPUS: ${corpus}` : ''}${focal ? `\nFOCO CONCEITUAL: ${focal}` : ''}

**OBJETIVO**: Identificar o que umas fontes tratam como central e outras tratam como perif√©rico, irrelevante ou nem mencionam ‚Äî e o que essa assimetria revela sobre como diferentes tradi√ß√µes constroem o problema.

**ETAPA 1 ‚Äî MAPEAMENTO DE CENTRALIDADES**
Para cada fonte: o que ela trata como o PROBLEMA CENTRAL do dom√≠nio? Que aspectos s√£o estruturantes versus acess√≥rios? Cite [n] a passagem que melhor evidencia essa hierarquia de aten√ß√£o.

**ETAPA 2 ‚Äî IDENTIFICA√á√ÉO DE ASSIMETRIAS**
${prof === 'rapido' ? 'Liste 3-4 assimetrias: o que Fonte A trata como central que Fonte B ignora ou marginaliza? Uma linha de explica√ß√£o para cada.' : `Para cada assimetria significativa:
- Elemento X: central em [fontes] [n], perif√©rico/ausente em [fontes] [n]
- Como cada lado justificaria sua escolha de aten√ß√£o?
- Essa assimetria √© de: escopo disciplinar? pressuposto te√≥rico? valor impl√≠cito? m√©todo?
- O que fica invis√≠vel para cada lado por causa dessa distribui√ß√£o de aten√ß√£o?`}

${prof !== 'rapido' ? `
**ETAPA 3 ‚Äî CONSEQU√äNCIAS ANAL√çTICAS**
Quais assimetrias t√™m maior impacto nas conclus√µes poss√≠veis? Se as fontes que marginalizam X tivessem dado a X a aten√ß√£o que as outras d√£o, que conclus√µes diferentes seriam poss√≠veis?` : ''}

${prof === 'exaustivo' ? `
**ETAPA 4 ‚Äî POL√çTICA DE ATEN√á√ÉO**
As assimetrias s√£o: neutras (diferentes escopos leg√≠timos) ou pol√≠ticas (algumas perspectivas sistematicamente apagam certas quest√µes)? Que interesses ou valores estruturam o que √© tratado como central vs. marginal em cada tradi√ß√£o?` : ''}`,
            },

            evolucao: {
                nome: 'Evolu√ß√£o Conceitual',
                base: (corpus, focal, prof) => `Fa√ßa uma an√°lise de EVOLU√á√ÉO CONCEITUAL em todas as fontes deste notebook.${corpus ? `\n\nCORPUS: ${corpus}` : ''}${focal ? `\nFOCO CONCEITUAL: "${focal}" ‚Äî rastreie especialmente este conceito.` : ''}

**OBJETIVO**: Rastrear como um ou mais conceitos centrais se transformam, migram, se deformam ou se enriquecem ao longo das fontes ‚Äî seja em sentido cronol√≥gico, disciplinar ou argumentativo.

**ETAPA 1 ‚Äî IDENTIFICA√á√ÉO DE CONCEITOS A RASTREAR**
${focal ? `Foco principal: "${focal}". Identifique tamb√©m 2-3 conceitos sat√©lites que co-evoluem com ele.` : 'Identifique 2-4 conceitos centrais do corpus que aparecem em m√∫ltiplas fontes e admitem varia√ß√£o de sentido.'}
Para cada conceito: lista de fontes onde aparece [n].

**ETAPA 2 ‚Äî MAPEAMENTO DE VARIA√á√ïES**
Para cada conceito rastreado, descreva como aparece em cada fonte:
- Defini√ß√£o ou uso espec√≠fico [n] ‚Äî nas palavras da fonte
- Fun√ß√£o no argumento: central / instrumental / contestado / pressuposto
- Carga te√≥rica: que teoria de fundo o conceito carrega nessa fonte?

${prof !== 'rapido' ? `
**ETAPA 3 ‚Äî AN√ÅLISE DE TRAJET√ìRIA**
- H√° progress√£o identific√°vel (o conceito se complexifica, se refina)?
- H√° ruptura (o conceito muda de natureza entre fontes, n√£o apenas de defini√ß√£o)?
- H√° degrada√ß√£o (o conceito perde precis√£o ou se esvazia ao migrar)?
- H√° bifurca√ß√£o (o conceito se divide em dois conceitos distintos)?
Cite evid√™ncias espec√≠ficas [n] para cada padr√£o identificado.` : ''}

${prof === 'exaustivo' ? `
**ETAPA 4 ‚Äî GENEALOGIA E IMPLICA√á√ïES**
- Que vers√£o do conceito √© mais produtiva para trabalho interdisciplinar e por qu√™?
- Quais transforma√ß√µes s√£o ganhos epist√™micos? Quais s√£o perdas?
- Se voc√™ precisasse propor uma defini√ß√£o de trabalho para usar todas as fontes juntas, que elementos de cada vers√£o preservaria? Que sacrificaria? Marque isso como INTERPRETA√á√ÉO sua.` : ''}`,
            },

            exclusao: {
                nome: 'Padr√µes de Exclus√£o',
                base: (corpus, focal, prof) => `Fa√ßa uma an√°lise de PADR√ïES DE EXCLUS√ÉO em todas as fontes deste notebook.${corpus ? `\n\nCORPUS: ${corpus}` : ''}${focal ? `\nFOCO CONCEITUAL: ${focal}` : ''}

**OBJETIVO**: Identificar o que √© sistematicamente marginalizado, descartado como n√£o-cient√≠fico, tratado como √≥bvio demais para merecer aten√ß√£o, ou tornado estruturalmente impens√°vel pelo corpus.

**ETAPA 1 ‚Äî IDENTIFICA√á√ÉO DE EXCLUS√ïES**
Examine o corpus em busca de:
- Argumentos descartados sem refuta√ß√£o detalhada [n]
- Perspectivas mencionadas apenas para ser desconsideradas [n]
- Quest√µes tratadas como j√° resolvidas ou irrelevantes [n]
- Tipos de evid√™ncia n√£o reconhecidos como leg√≠timos [n]
- Vozes citadas apenas como contraste negativo [n]

**ETAPA 2 ‚Äî PADR√ïES**
${prof === 'rapido' ? 'As exclus√µes formam algum padr√£o? O que sistematicamente "n√£o conta" para este corpus?' : `Classifique as exclus√µes:
- **Disciplinar**: o que outras √°reas fariam mas este campo descarta metodologicamente?
- **Epistemol√≥gica**: que tipos de conhecimento (experiencial, t√°cito, n√£o-formalizado) s√£o invisibilizados?
- **Pol√≠tica**: que perspectivas de grupos espec√≠ficos s√£o sistematicamente marginalizadas?
- **Hist√≥rica**: que posi√ß√µes "superadas" poderiam ainda ter valor e por qu√™ foram descartadas?

Para cada exclus√£o significativa: h√° alguma fonte no corpus que resiste parcialmente ao padr√£o? [n]`}

${prof !== 'rapido' ? `
**ETAPA 3 ‚Äî CUSTO DAS EXCLUS√ïES**
Para as 3 exclus√µes mais consequentes: que an√°lises se tornariam poss√≠veis se o corpus inclu√≠sse o exclu√≠do? Que conclus√µes do corpus dependem de manter essas exclus√µes?` : ''}

${prof === 'exaustivo' ? `
**ETAPA 4 ‚Äî REFLEX√ÉO CR√çTICA**
Os padr√µes de exclus√£o s√£o: necess√°rios (limites leg√≠timos de escopo)? contingentes (resultado de hist√≥ria e poder no campo)? ou funcionais (o campo precisa excluir isso para manter sua coer√™ncia interna)?

Que fontes externas ao corpus representariam mais diretamente o exclu√≠do?` : ''}`,
            },

            hierarquia: {
                nome: 'Hierarquia Conceitual',
                base: (corpus, focal, prof) => `Fa√ßa uma an√°lise de HIERARQUIA CONCEITUAL em todas as fontes deste notebook.${corpus ? `\n\nCORPUS: ${corpus}` : ''}${focal ? `\nFOCO CONCEITUAL: ${focal}` : ''}

**OBJETIVO**: Identificar quais conceitos funcionam como √¢ncoras que estruturam os demais ‚Äî os "conceitos-mestre" que, se mudassem, mudariam tudo abaixo deles.

**ETAPA 1 ‚Äî INVENT√ÅRIO CONCEITUAL**
Liste os 15-20 conceitos mais frequentes e centrais no corpus. Para cada: quais fontes o usam [n].

**ETAPA 2 ‚Äî MAPEAMENTO DE DEPEND√äNCIAS**
Identifique rela√ß√µes de depend√™ncia: que conceitos pressup√µem outros para fazer sentido?
${prof === 'rapido' ? 'Identifique 3-5 conceitos-√¢ncora: conceitos que, se removidos, fazem outros desmoronar. Uma linha de justificativa para cada.' : `Para cada rela√ß√£o de depend√™ncia identificada:
- Conceito A pressup√µe Conceito B: cite [n] onde isso √© evidente
- A depend√™ncia √©: l√≥gica (A n√£o tem sentido sem B)? emp√≠rica (A s√≥ funciona se B for verdadeiro)? metodol√≥gica (A s√≥ √© mensur√°vel via B)?
- A depend√™ncia √© reconhecida pelas fontes ou impl√≠cita?`}

${prof !== 'rapido' ? `
**ETAPA 3 ‚Äî CONCEITOS-√ÇNCORA**
Identifique os 3-5 conceitos no topo da hierarquia ‚Äî aqueles de que mais outros dependem. Para cada:
- Que conceitos dependem dele [n]
- Que fontes o contestam vs. aceitam como dado [n]
- O que aconteceria ao restante do corpus se esse conceito fosse rejeitado?` : ''}

${prof === 'exaustivo' ? `
**ETAPA 4 ‚Äî HIERARQUIAS ALTERNATIVAS**
As fontes de diferentes tradi√ß√µes organizam os mesmos conceitos em hierarquias diferentes? Mapeie: o que √© conceito-√¢ncora para a Tradi√ß√£o A pode ser conceito derivado para a Tradi√ß√£o B? Que implica√ß√µes isso tem para o di√°logo interdisciplinar?

**ETAPA 5 ‚Äî PONTOS DE ALAVANCAGEM**
Para pesquisa original: que conceito-√¢ncora, se reelaborado, ofereceria maior potencial de transforma√ß√£o do campo?` : ''}`,
            },

        };

        function generate() {
            if (!activeH) { alert('Selecione uma heur√≠stica de padr√£o.'); return; }
            const corpus = document.getElementById('corpusDesc').value.trim();
            const focal = document.getElementById('focalConcept').value.trim();

            let prompt = H[activeH].base(corpus, focal, activeInt);
            if (grOn) prompt += GR;

            document.getElementById('outputBox').textContent = prompt;
            document.getElementById('outputTitle').textContent = `Prompt ‚Äî ${H[activeH].nome}`;

            const len = prompt.length;
            const pct = Math.min(len / 5000 * 100, 100);
            const fill = document.getElementById('charFill');
            fill.style.width = pct + '%';
            fill.style.background = len > 5000 ? '#e53935' : len > 3800 ? '#f9a825' : '#1e8e3e';
            const lbl = document.getElementById('charLabel');
            lbl.className = 'char-label' + (len > 5000 ? ' over' : '');
            lbl.textContent = len > 5000
                ? `‚ö†Ô∏è ${len}/5000 ‚Äî excede limite NotebookLM`
                : `${len} / 5000 chars`;

            document.getElementById('outputWrap').style.display = 'block';
            document.getElementById('outputWrap').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function doCopy() {
            navigator.clipboard.writeText(document.getElementById('outputBox').textContent).then(() => {
                const btn = document.getElementById('copyBtn');
                btn.classList.add('ok');
                btn.textContent = '‚úì Copiado!';
                setTimeout(() => { btn.classList.remove('ok'); btn.textContent = 'üìã Copiar'; }, 2000);
            }).catch(() => alert('Erro ao copiar. Selecione manualmente.'));
        }
    </script>
</body>

</html>