<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curadoria Liter√°ria 2025 - Navega√ß√£o Interativa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #F9FAFB;
            color: #1F2937;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            height: 350px;
            margin-left: auto;
            margin-right: auto;
        }

        .book-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .book-card:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .book-card.selected {
            transform: scale(1.05);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .filter-btn {
            transition: all 0.2s ease;
        }

        .filter-btn:hover {
            transform: scale(1.05);
        }

        .filter-btn.active {
            transform: scale(1.1);
            font-weight: 700;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-overlay {
            backdrop-filter: blur(4px);
            animation: fadeInOverlay 0.3s ease;
        }

        @keyframes fadeInOverlay {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .modal-content {
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateY(100px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .priority-badge {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.7;
            }
        }

        .nav-pill {
            transition: all 0.3s ease;
        }

        .nav-pill.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>

<body class="bg-gray-50">

    <!-- Navigation Bar -->
    <nav class="bg-white shadow-sm sticky top-0 z-40 border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <h1 class="text-2xl font-bold text-indigo-900">üìö Curadoria 2025</h1>
                <div class="flex gap-3">
                    <button onclick="scrollToSection('overview')"
                        class="nav-pill px-4 py-2 rounded-full text-sm font-medium text-gray-700 hover:bg-gray-100">
                        Vis√£o Geral
                    </button>
                    <button onclick="scrollToSection('books')"
                        class="nav-pill px-4 py-2 rounded-full text-sm font-medium text-gray-700 hover:bg-gray-100">
                        Livros
                    </button>
                    <button onclick="toggleStats()"
                        class="nav-pill px-4 py-2 rounded-full text-sm font-medium text-gray-700 hover:bg-gray-100">
                        <span id="stats-count">0/28</span> Lidos
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 py-8">

        <!-- Hero Section -->
        <section id="overview"
            class="mb-12 bg-gradient-to-br from-indigo-900 via-purple-900 to-indigo-800 rounded-3xl p-8 md:p-12 text-white shadow-2xl">
            <div class="max-w-4xl">
                <h2 class="text-4xl md:text-5xl font-extrabold mb-4">Sua Jornada Intelectual</h2>
                <p class="text-xl text-indigo-200 mb-6 leading-relaxed">
                    28 livros essenciais selecionados para explorar transforma√ß√µes tecnol√≥gicas, crises clim√°ticas,
                    legados coloniais e filosofia do trabalho.
                </p>
                <div class="flex flex-wrap gap-3">
                    <span
                        class="px-4 py-2 bg-white/20 backdrop-blur-sm rounded-full text-sm font-semibold border border-white/30">7
                        Prioridades M√°ximas</span>
                    <span
                        class="px-4 py-2 bg-white/20 backdrop-blur-sm rounded-full text-sm font-semibold border border-white/30">14
                        Alta Compatibilidade</span>
                    <span
                        class="px-4 py-2 bg-white/20 backdrop-blur-sm rounded-full text-sm font-semibold border border-white/30">7
                        Explorat√≥rios</span>
                </div>
            </div>
        </section>

        <!-- Filters -->
        <section id="books" class="mb-8">
            <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-200">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-4">
                    <h3 class="text-2xl font-bold text-gray-900">Filtrar por Categoria</h3>
                    <button onclick="resetFilters()"
                        class="text-sm text-indigo-600 hover:text-indigo-800 font-medium underline">
                        Limpar filtros
                    </button>
                </div>
                <div class="flex flex-wrap gap-3" id="filter-container">
                    <button onclick="filterBooks('all')"
                        class="filter-btn active px-5 py-2.5 rounded-full bg-gray-900 text-white text-sm font-medium"
                        data-filter="all">
                        Todos (28)
                    </button>
                    <button onclick="filterBooks('tech')"
                        class="filter-btn px-5 py-2.5 rounded-full bg-indigo-100 text-indigo-700 text-sm font-medium hover:bg-indigo-200"
                        data-filter="tech">
                        ü§ñ Tecnologia (6)
                    </button>
                    <button onclick="filterBooks('climate')"
                        class="filter-btn px-5 py-2.5 rounded-full bg-emerald-100 text-emerald-700 text-sm font-medium hover:bg-emerald-200"
                        data-filter="climate">
                        üå± Clima (7)
                    </button>
                    <button onclick="filterBooks('colonial')"
                        class="filter-btn px-5 py-2.5 rounded-full bg-amber-100 text-amber-700 text-sm font-medium hover:bg-amber-200"
                        data-filter="colonial">
                        üèõÔ∏è Colonial (5)
                    </button>
                    <button onclick="filterBooks('precarity')"
                        class="filter-btn px-5 py-2.5 rounded-full bg-rose-100 text-rose-700 text-sm font-medium hover:bg-rose-200"
                        data-filter="precarity">
                        ‚öñÔ∏è Precariza√ß√£o (4)
                    </button>
                    <button onclick="filterBooks('essential')"
                        class="filter-btn px-5 py-2.5 rounded-full bg-purple-100 text-purple-700 text-sm font-medium hover:bg-purple-200"
                        data-filter="essential">
                        ‚≠ê Essenciais NY (6)
                    </button>
                </div>
                <div class="mt-4 flex flex-wrap gap-2">
                    <button onclick="filterByType('fiction')"
                        class="px-4 py-1.5 rounded-full bg-blue-50 text-blue-700 text-xs font-medium hover:bg-blue-100">
                        üìñ S√≥ Fic√ß√£o
                    </button>
                    <button onclick="filterByType('nonfiction')"
                        class="px-4 py-1.5 rounded-full bg-gray-100 text-gray-700 text-xs font-medium hover:bg-gray-200">
                        üß† S√≥ N√£o-Fic√ß√£o
                    </button>
                    <button onclick="filterByPriority('max')"
                        class="px-4 py-1.5 rounded-full bg-red-50 text-red-700 text-xs font-medium hover:bg-red-100">
                        üî• Prioridade M√°xima
                    </button>
                </div>
            </div>
        </section>

        <!-- Books Grid -->
        <section id="books-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Books will be injected here by JavaScript -->
        </section>

    </main>

    <!-- Modal for Book Details -->
    <div id="book-modal"
        class="fixed inset-0 bg-black/50 modal-overlay hidden z-50 flex items-center justify-center p-4"
        onclick="closeModal(event)">
        <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto modal-content"
            onclick="event.stopPropagation()">
            <div id="modal-content" class="p-8">
                <!-- Content injected by JS -->
            </div>
        </div>
    </div>

    <script>
        // Complete Book Database
        const books = [
            // ESSENCIAIS NEW YORKER (Priority Max)
            {
                id: 1,
                title: "Dead and Alive",
                author: "Zadie Smith",
                category: "tech",
                type: "nonfiction",
                priority: "max",
                icon: "üß†",
                description: "Colet√¢nea de ensaios sobre arte, algoritmos e temporalidade. Inclui an√°lise de Stormzy, Celia Paul, e relato autobiogr√°fico sobre queda da janela na adolesc√™ncia.",
                why: "Ensa√≠smo afiado que voc√™ adora (Montaigne/Didion) + investiga√ß√£o direta de media√ß√£o algor√≠tmica do tempo. Respiro anal√≠tico e trabalho intelectual simultaneamente.",
                essential: true,
                tags: ["algoritmos", "arte contempor√¢nea", "ensaios", "autobiografia"]
            },
            {
                id: 2,
                title: "Perfection",
                author: "Vincenzo Latronico",
                category: "precarity",
                type: "fiction",
                priority: "max",
                icon: "üìñ",
                description: "Romance sobre casal de designers gr√°ficos em Berlim (2010s), obcecados por atualiza√ß√µes est√©ticas. Homenagem a 'As Coisas' de Perec.",
                why: "Capitalismo est√©tico + precariza√ß√£o refinada. Dialoga com sua fascina√ß√£o por Moby Dick (arqueologia do capital). Prosa econ√¥mica, densidade impl√≠cita.",
                essential: true,
                tags: ["capitalismo", "design", "Berlim", "Perec", "mobilidade"]
            },
            {
                id: 3,
                title: "Will There Ever Be Another You",
                author: "Patricia Lockwood",
                category: "tech",
                type: "fiction",
                priority: "max",
                icon: "üìñ",
                description: "Escritora contrai COVID e perde capacidade de ler/escrever. Doen√ßa como usurpa√ß√£o do self, forma fragmentada evoca prisma da enfermidade.",
                why: "Transforma√ß√£o tecnol√≥gica da subjetividade via doen√ßa. Experimental sem hermetismo. Lockwood abandona narrativas de recupera√ß√£o.",
                essential: true,
                tags: ["doen√ßa", "COVID", "fragmenta√ß√£o", "experimental", "identidade"]
            },
            {
                id: 4,
                title: "Audition",
                author: "Katie Kitamura",
                category: "precarity",
                type: "fiction",
                priority: "max",
                icon: "üìñ",
                description: "Atriz em NY perde distin√ß√£o real/irreal. Estrutura em dois atos subverte cronologia. Drama de interfer√™ncia masculina que nunca conclui.",
                why: "Metafic√ß√£o + realismo via surreal. Prosa cristalina, experimenta√ß√£o moderada. Teatro como laborat√≥rio de precariedade relacional.",
                essential: true,
                tags: ["teatro", "metafic√ß√£o", "NY", "g√™nero", "surrealismo"]
            },
            {
                id: 5,
                title: "The Wilderness",
                author: "Angela Flournoy",
                category: "precarity",
                type: "fiction",
                priority: "high",
                icon: "üìñ",
                description: "Cinco mulheres negras atravessam Obama‚ÜíTrump‚Üípandemia. Amizade, responsabilidades, m√≠dia social como cen√°rio formador.",
                why: "Ansiedade clim√°tica perif√©rica + precariza√ß√£o das rela√ß√µes. Pode ser seu '6 em 10' - leitura fluida mas substantiva.",
                essential: true,
                tags: ["amizade", "ra√ßa", "m√≠dia social", "pandemia", "contempor√¢neo"]
            },
            {
                id: 6,
                title: "Flashlight",
                author: "Susan Choi",
                category: "colonial",
                type: "fiction",
                priority: "high",
                icon: "üìñ",
                description: "Fam√≠lia coreano-americana atrav√©s de MA‚ÜíCoreia do Norte‚ÜíJap√£o‚ÜíParis. Pol√≠ticas globais encarnadas em trajet√≥rias pessoais.",
                why: "Di√°spora + experimenta√ß√£o formal sem opacidade. Estrutura fragmentada temporal/espacial. Forte em colonialismo encarnado.",
                essential: true,
                tags: ["di√°spora", "Coreia", "fam√≠lia", "pol√≠tica global", "fragmenta√ß√£o"]
            },
            {
                id: 7,
                title: "Is a River Alive?",
                author: "Robert Macfarlane",
                category: "climate",
                type: "nonfiction",
                priority: "high",
                icon: "üß†",
                description: "Travelogue filos√≥fico: rios como entidades vivas vs. corpora√ß√µes-como-pessoas. Direitos da natureza no Equador.",
                why: "Geografia pol√≠tica + otimismo ecol√≥gico temperado. RISCO: pode saturar se j√° imerso em geografia. Considerar timing.",
                essential: true,
                tags: ["rios", "direitos da natureza", "Equador", "filosofia", "geografia"]
            },

            // TECNOLOGIA
            {
                id: 8,
                title: "Mood Machine",
                author: "Liz Pelly",
                category: "tech",
                type: "nonfiction",
                priority: "high",
                icon: "üß†",
                description: "Como o Spotify e algoritmos de recomenda√ß√£o moldam nossa autonomia musical e gosto cultural.",
                tags: ["Spotify", "algoritmos", "m√∫sica", "plataformas"]
            },
            {
                id: 9,
                title: "The Sirens' Call",
                author: "Chris Hayes",
                category: "tech",
                type: "nonfiction",
                priority: "high",
                icon: "üß†",
                description: "A crise de aten√ß√£o como falha estrutural do capitalismo, n√£o pessoal. Economia da aten√ß√£o.",
                tags: ["aten√ß√£o", "capitalismo", "m√≠dia", "estrutura"]
            },
            {
                id: 10,
                title: "Second Life",
                author: "Amanda Hess",
                category: "tech",
                type: "nonfiction",
                priority: "mid",
                icon: "üß†",
                description: "Medita√ß√£o ensa√≠stica sobre gravidez mediada por telas, apps e vigil√¢ncia digital.",
                tags: ["gravidez", "apps", "vigil√¢ncia", "ensaio"]
            },
            {
                id: 11,
                title: "Gliff",
                author: "Ali Smith",
                category: "tech",
                type: "fiction",
                priority: "mid",
                icon: "üìñ",
                description: "Distopia estilosa sobre identidade e vigil√¢ncia em um futuro pr√≥ximo. Prosa caracter√≠stica de Smith.",
                tags: ["distopia", "vigil√¢ncia", "identidade", "futuro"]
            },
            {
                id: 12,
                title: "The Dream Hotel",
                author: "Laila Lalami",
                category: "tech",
                type: "fiction",
                priority: "mid",
                icon: "üìñ",
                description: "Vigil√¢ncia preditiva invadindo o √∫ltimo ref√∫gio humano: os sonhos. Thriller especulativo.",
                tags: ["sonhos", "vigil√¢ncia preditiva", "distopia", "privacidade"]
            },
            {
                id: 13,
                title: "The Age of Extraction",
                author: "Tim Wu",
                category: "tech",
                type: "nonfiction",
                priority: "high",
                icon: "üß†",
                description: "As Big Techs vistas sob a √≥tica do extrativismo de recursos e dados. Hist√≥ria do modelo de neg√≥cios.",
                tags: ["Big Tech", "extrativismo", "dados", "capitalismo digital"]
            },

            // CLIMA
            {
                id: 14,
                title: "In Praise of Floods",
                author: "James C. Scott",
                category: "climate",
                type: "nonfiction",
                priority: "max",
                icon: "üß†",
                description: "Tratado geogr√°fico sobre como interven√ß√£o humana cria fragilidade natural. √öltimo livro de Scott.",
                tags: ["geografia", "inunda√ß√µes", "interven√ß√£o", "fragilidade"]
            },
            {
                id: 15,
                title: "We Are Eating the Earth",
                author: "Michael Grunwald",
                category: "climate",
                type: "nonfiction",
                priority: "high",
                icon: "üß†",
                description: "Dados densos sobre o dilema existencial entre agricultura industrial e colapso clim√°tico.",
                tags: ["agricultura", "clima", "dados", "dilema"]
            },
            {
                id: 16,
                title: "The Genius of Trees",
                author: "Harriet Rix",
                category: "climate",
                type: "nonfiction",
                priority: "mid",
                icon: "üß†",
                description: "A ag√™ncia das √°rvores como engenheiras de ecossistemas. Remete √† observa√ß√£o de Thoreau.",
                tags: ["√°rvores", "ecossistemas", "Thoreau", "natureza"]
            },
            {
                id: 17,
                title: "Tilt",
                author: "Emma Pattee",
                category: "climate",
                type: "fiction",
                priority: "mid",
                icon: "üìñ",
                description: "Experi√™ncia-limite de maternidade durante um terremoto catastr√≥fico. Fic√ß√£o de desastre √≠ntima.",
                tags: ["maternidade", "terremoto", "desastre", "limite"]
            },
            {
                id: 18,
                title: "Ends of the Earth",
                author: "Neil Shubin",
                category: "climate",
                type: "nonfiction",
                priority: "high",
                icon: "üß†",
                description: "Explora√ß√£o polar, ci√™ncia clim√°tica urgente e geopol√≠tica f√≠sica. Paleontologia + presente.",
                tags: ["polo", "geopol√≠tica", "ci√™ncia", "paleontologia"]
            },
            {
                id: 19,
                title: "When It All Burns",
                author: "Jordan Thomas",
                category: "climate",
                type: "nonfiction",
                priority: "high",
                icon: "üß†",
                description: "Antropologia do fogo: manejo ind√≠gena versus pol√≠ticas modernas de supress√£o.",
                tags: ["fogo", "ind√≠gena", "manejo", "antropologia"]
            },
            {
                id: 20,
                title: "A Marriage at Sea",
                author: "Sophie Elmhirst",
                category: "climate",
                type: "nonfiction",
                priority: "mid",
                icon: "üß†",
                description: "Casal ingl√™s √† deriva no Pac√≠fico por 118 dias ap√≥s ataque de baleia em 1973. Parceria em extremis.",
                tags: ["sobreviv√™ncia", "oceano", "casamento", "desastre"]
            },

            // COLONIAL
            {
                id: 21,
                title: "Code Noir",
                author: "Canisia Lubrin",
                category: "colonial",
                type: "fiction",
                priority: "high",
                icon: "üìñ",
                description: "Prosa experimental intercalada com decretos reais de escravid√£o do s√©culo XVII. H√≠brido forma/arquivo.",
                tags: ["escravid√£o", "experimental", "arquivo", "Caribe"]
            },
            {
                id: 22,
                title: "Splendid Liberators",
                author: "Joe Jackson",
                category: "colonial",
                type: "nonfiction",
                priority: "high",
                icon: "üß†",
                description: "Hist√≥ria brutal do imperialismo americano em Cuba e Filipinas. Desmonta mito libertador.",
                tags: ["imperialismo", "Cuba", "Filipinas", "EUA"]
            },
            {
                id: 23,
                title: "Embracing Exile",
                author: "David Kraemer",
                category: "colonial",
                type: "nonfiction",
                priority: "mid",
                icon: "üß†",
                description: "Argumento filos√≥fico sobre a di√°spora judaica como modelo de sobreviv√™ncia. Ex√≠lio como m√©todo.",
                tags: ["di√°spora", "juda√≠smo", "ex√≠lio", "filosofia"]
            },
            {
                id: 24,
                title: "The South",
                author: "Tash Aw",
                category: "colonial",
                type: "fiction",
                priority: "mid",
                icon: "üìñ",
                description: "Hierarquias √©tnicas, heran√ßa de terras e geografia p√≥s-colonial na Mal√°sia contempor√¢nea.",
                tags: ["Mal√°sia", "terra", "etnia", "p√≥s-colonial"]
            },
            {
                id: 25,
                title: "Black in Blues",
                author: "Imani Perry",
                category: "colonial",
                type: "nonfiction",
                priority: "high",
                icon: "üß†",
                description: "Hist√≥ria cultural e materialista da cor azul na di√°spora negra. Cor como pol√≠tica.",
                tags: ["cor", "di√°spora negra", "cultura", "materialismo"]
            },

            // PRECARIZA√á√ÉO
            {
                id: 26,
                title: "Make Your Own Job",
                author: "Erik Baker",
                category: "precarity",
                type: "nonfiction",
                priority: "max",
                icon: "üß†",
                description: "Hist√≥ria intelectual da '√©tica empresarial' e constru√ß√£o da subjetividade neoliberal.",
                tags: ["neoliberalismo", "trabalho", "subjetividade", "empreendedorismo"]
            },
            {
                id: 27,
                title: "Pick a Color",
                author: "S. Thammavongsa",
                category: "precarity",
                type: "fiction",
                priority: "mid",
                icon: "üìñ",
                description: "Realismo afiado sobre trabalho e imigrantes em um sal√£o de beleza. Contos precisos.",
                tags: ["trabalho", "imigra√ß√£o", "realismo", "contos"]
            },
            {
                id: 28,
                title: "The Diversity of Morals",
                author: "Steven Lukes",
                category: "precarity",
                type: "nonfiction",
                priority: "mid",
                icon: "üß†",
                description: "Ponte entre filosofia moral e sociologia: universais versus relativismo cultural.",
                tags: ["filosofia", "moral", "sociologia", "universais"]
            }
        ];

        let currentFilter = 'all';
        let readBooks = new Set();

        // Initialize
        function init() {
            renderBooks(books);
            updateStatsCounter();
        }

        // Render Books
        function renderBooks(bookList) {
            const grid = document.getElementById('books-grid');
            grid.innerHTML = '';

            bookList.forEach(book => {
                const priorityBadge = book.priority === 'max' ?
                    '<span class="absolute top-3 right-3 px-3 py-1 bg-red-500 text-white text-xs font-bold rounded-full priority-badge">PRIORIDADE</span>' :
                    book.priority === 'high' ?
                        '<span class="absolute top-3 right-3 px-2 py-1 bg-orange-500 text-white text-xs font-semibold rounded-full">ALTA</span>' : '';

                const essentialBadge = book.essential ?
                    '<span class="absolute top-3 left-3 px-2 py-1 bg-purple-600 text-white text-xs font-bold rounded-full">‚≠ê NY</span>' : '';

                const categoryColors = {
                    tech: 'border-indigo-500 bg-indigo-50',
                    climate: 'border-emerald-500 bg-emerald-50',
                    colonial: 'border-amber-500 bg-amber-50',
                    precarity: 'border-rose-500 bg-rose-50'
                };

                const card = document.createElement('div');
                card.className = `book-card bg-white rounded-2xl shadow-sm border-t-4 ${categoryColors[book.category]} p-6 relative fade-in`;
                card.setAttribute('data-category', book.category);
                card.setAttribute('data-type', book.type);
                card.setAttribute('data-priority', book.priority);
                card.onclick = () => openModal(book);

                card.innerHTML = `
                    ${priorityBadge}
                    ${essentialBadge}
                    <div class="flex justify-between items-start mb-3 mt-8">
                        <span class="text-xs font-bold uppercase tracking-wide ${book.type === 'fiction' ? 'text-blue-600' : 'text-gray-600'}">${book.type === 'fiction' ? 'Fic√ß√£o' : 'N√£o-Fic√ß√£o'}</span>
                        <span class="text-3xl">${book.icon}</span>
                    </div>
                    <h4 class="text-xl font-bold text-gray-900 mb-1 leading-tight">${book.title}</h4>
                    <p class="text-sm text-gray-500 mb-3 font-medium">${book.author}</p>
                    <p class="text-gray-700 text-sm leading-relaxed line-clamp-3">${book.description}</p>
                    <div class="mt-4 flex flex-wrap gap-1.5">
                        ${book.tags.slice(0, 3).map(tag => `<span class="px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded">${tag}</span>`).join('')}
                    </div>
                `;

                grid.appendChild(card);
            });
        }

        // Filter Books
        function filterBooks(category) {
            currentFilter = category;

            // Update active button
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-gray-900', 'text-white');
                if (btn.dataset.filter === category) {
                    btn.classList.add('active', 'bg-gray-900', 'text-white');
                }
            });

            let filtered = books;
            if (category !== 'all') {
                if (category === 'essential') {
                    filtered = books.filter(b => b.essential);
                } else {
                    filtered = books.filter(b => b.category === category);
                }
            }

            renderBooks(filtered);
        }

        function filterByType(type) {
            const filtered = books.filter(b => b.type === type);
            renderBooks(filtered);
        }

        function filterByPriority(priority) {
            const filtered = books.filter(b => b.priority === priority);
            renderBooks(filtered);
        }

        function resetFilters() {
            currentFilter = 'all';
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-gray-900', 'text-white');
            });
            document.querySelector('[data-filter="all"]').classList.add('active', 'bg-gray-900', 'text-white');
            renderBooks(books);
        }

        // Modal
        function openModal(book) {
            const modal = document.getElementById('book-modal');
            const content = document.getElementById('modal-content');

            const categoryLabels = {
                tech: 'ü§ñ Tecnologia & Subjetividade',
                climate: 'üå± Crise Clim√°tica & Geografia',
                colonial: 'üèõÔ∏è Legados Coloniais',
                precarity: '‚öñÔ∏è Precariza√ß√£o & Filosofia'
            };

            content.innerHTML = `
                <button onclick="closeModal()" class="absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-2xl font-bold">&times;</button>
                
                <div class="mb-6">
                    <span class="text-sm font-bold text-gray-500 uppercase tracking-wide">${categoryLabels[book.category]}</span>
                    <h2 class="text-3xl font-extrabold text-gray-900 mt-2">${book.title}</h2>
                    <p class="text-xl text-gray-600 mt-1">${book.author}</p>
                </div>

                ${book.essential ? '<div class="mb-4 p-4 bg-purple-50 border-l-4 border-purple-500 rounded"><p class="text-sm font-semibold text-purple-900">‚≠ê Selecionado como Essencial pelo The New Yorker</p></div>' : ''}

                ${book.priority === 'max' ? '<div class="mb-4 p-4 bg-red-50 border-l-4 border-red-500 rounded"><p class="text-sm font-semibold text-red-900">üî• PRIORIDADE M√ÅXIMA - Come√ßar por aqui</p></div>' : ''}

                <div class="space-y-4 mb-6">
                    <div>
                        <h3 class="font-bold text-gray-900 mb-2">Sobre o livro:</h3>
                        <p class="text-gray-700 leading-relaxed">${book.description}</p>
                    </div>

                    ${book.why ? `
                    <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-200">
                        <h3 class="font-bold text-indigo-900 mb-2">Por que este livro para voc√™:</h3>
                        <p class="text-indigo-800 leading-relaxed">${book.why}</p>
                    </div>
                    ` : ''}

                    <div>
                        <h3 class="font-bold text-gray-900 mb-2">Tags:</h3>
                        <div class="flex flex-wrap gap-2">
                            ${book.tags.map(tag => `<span class="px-3 py-1.5 bg-gray-100 text-gray-700 text-sm rounded-full font-medium">${tag}</span>`).join('')}
                        </div>
                    </div>
                </div>

                <div class="flex gap-3">
                    <button onclick="toggleRead(${book.id})" class="flex-1 py-3 rounded-lg font-semibold transition ${readBooks.has(book.id) ? 'bg-green-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}">
                        ${readBooks.has(book.id) ? '‚úì Marcado como Lido' : 'Marcar como Lido'}
                    </button>
                </div>
            `;

            modal.classList.remove('hidden');
        }

        function closeModal(event) {
            if (!event || event.target.id === 'book-modal') {
                document.getElementById('book-modal').classList.add('hidden');
            }
        }

        function toggleRead(bookId) {
            if (readBooks.has(bookId)) {
                readBooks.delete(bookId);
            } else {
                readBooks.add(bookId);
            }
            updateStatsCounter();
            // Re-render modal to update button
            const book = books.find(b => b.id === bookId);
            if (book) openModal(book);
        }

        function updateStatsCounter() {
            document.getElementById('stats-count').textContent = `${readBooks.size}/28`;
        }

        function toggleStats() {
            alert(`Voc√™ leu ${readBooks.size} de 28 livros (${Math.round(readBooks.size / 28 * 100)}%)`);
        }

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // Initialize on load
        init();
    </script>

</body>

</html>